/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/rsvp/[token]/route";
exports.ids = ["app/api/rsvp/[token]/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frsvp%2F%5Btoken%5D%2Froute&page=%2Fapi%2Frsvp%2F%5Btoken%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frsvp%2F%5Btoken%5D%2Froute.ts&appDir=%2FUsers%2Fshiqi%2FDocuments%2Fshiqi%2Fkidparty%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshiqi%2FDocuments%2Fshiqi%2Fkidparty&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frsvp%2F%5Btoken%5D%2Froute&page=%2Fapi%2Frsvp%2F%5Btoken%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frsvp%2F%5Btoken%5D%2Froute.ts&appDir=%2FUsers%2Fshiqi%2FDocuments%2Fshiqi%2Fkidparty%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshiqi%2FDocuments%2Fshiqi%2Fkidparty&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _Users_shiqi_Documents_shiqi_kidparty_src_app_api_rsvp_token_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/app/api/rsvp/[token]/route.ts */ \"(rsc)/./src/app/api/rsvp/[token]/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/rsvp/[token]/route\",\n        pathname: \"/api/rsvp/[token]\",\n        filename: \"route\",\n        bundlePath: \"app/api/rsvp/[token]/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"/Users/shiqi/Documents/shiqi/kidparty/src/app/api/rsvp/[token]/route.ts\",\n    nextConfigOutput,\n    userland: _Users_shiqi_Documents_shiqi_kidparty_src_app_api_rsvp_token_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/rsvp/[token]/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZyc3ZwJTJGJTVCdG9rZW4lNUQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnJzdnAlMkYlNUJ0b2tlbiU1RCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnJzdnAlMkYlNUJ0b2tlbiU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNoaXFpJTJGRG9jdW1lbnRzJTJGc2hpcWklMkZraWRwYXJ0eSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZzaGlxaSUyRkRvY3VtZW50cyUyRnNoaXFpJTJGa2lkcGFydHkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QmaXNHbG9iYWxOb3RGb3VuZEVuYWJsZWQ9ISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNkO0FBQ1M7QUFDTztBQUNLO0FBQ21DO0FBQ2pEO0FBQ087QUFDZjtBQUNzQztBQUN6QjtBQUNNO0FBQ0M7QUFDaEI7QUFDa0M7QUFDcEc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsYUFBYSxPQUFvQyxJQUFJLENBQUU7QUFDdkQsd0JBQXdCLE1BQXVDO0FBQy9EO0FBQ0E7QUFDQSxZ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bEU7QUFDQSxrQkFBa0IsNkVBQVk7QUFDOUI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1YsNkVBQTZFLGdGQUFjO0FBQzNGLGlDQUFpQyxRQUFRLEVBQUUsUUFBUTtBQUNuRCwwQkFBMEIsdUVBQVE7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxNQUFNO0FBQ04sNkJBQTZCLDZGQUFlO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJGQUFtQjtBQUNyRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2RUFBWTtBQUMxQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgeyBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZUFwcFBhdGggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2FwcC1wYXRoc1wiO1xuaW1wb3J0IHsgTm9kZU5leHRSZXF1ZXN0LCBOb2RlTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYmFzZS1odHRwL25vZGVcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0QWRhcHRlciwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9uZXh0LXJlcXVlc3RcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0UmV2YWxpZGF0ZVJlYXNvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2luc3RydW1lbnRhdGlvbi91dGlsc1wiO1xuaW1wb3J0IHsgc2VuZFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc2VuZC1yZXNwb25zZVwiO1xuaW1wb3J0IHsgZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzLCB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRDYWNoZUNvbnRyb2xIZWFkZXIgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvY2FjaGUtY29udHJvbFwiO1xuaW1wb3J0IHsgSU5GSU5JVEVfQ0FDSEUsIE5FWFRfQ0FDSEVfVEFHU19IRUFERVIgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9jb25zdGFudHNcIjtcbmltcG9ydCB7IE5vRmFsbGJhY2tFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9uby1mYWxsYmFjay1lcnJvci5leHRlcm5hbFwiO1xuaW1wb3J0IHsgQ2FjaGVkUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVzcG9uc2UtY2FjaGVcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvc2hpcWkvRG9jdW1lbnRzL3NoaXFpL2tpZHBhcnR5L3NyYy9hcHAvYXBpL3JzdnAvW3Rva2VuXS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcnN2cC9bdG9rZW5dL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcnN2cC9bdG9rZW5dXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9yc3ZwL1t0b2tlbl0vcm91dGVcIlxuICAgIH0sXG4gICAgZGlzdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX0RJU1RfRElSIHx8ICcnLFxuICAgIHJlbGF0aXZlUHJvamVjdERpcjogcHJvY2Vzcy5lbnYuX19ORVhUX1JFTEFUSVZFX1BST0pFQ1RfRElSIHx8ICcnLFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3NoaXFpL0RvY3VtZW50cy9zaGlxaS9raWRwYXJ0eS9zcmMvYXBwL2FwaS9yc3ZwL1t0b2tlbl0vcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgdmFyIF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbDtcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS9yc3ZwL1t0b2tlbl0vcm91dGVcIjtcbiAgICAvLyB0dXJib3BhY2sgZG9lc24ndCBub3JtYWxpemUgYC9pbmRleGAgaW4gdGhlIHBhZ2UgbmFtZVxuICAgIC8vIHNvIHdlIG5lZWQgdG8gdG8gcHJvY2VzcyBkeW5hbWljIHJvdXRlcyBwcm9wZXJseVxuICAgIC8vIFRPRE86IGZpeCB0dXJib3BhY2sgcHJvdmlkaW5nIGRpZmZlcmluZyB2YWx1ZSBmcm9tIHdlYnBhY2tcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFVSQk9QQUNLKSB7XG4gICAgICAgIHNyY1BhZ2UgPSBzcmNQYWdlLnJlcGxhY2UoL1xcL2luZGV4JC8sICcnKSB8fCAnLyc7XG4gICAgfSBlbHNlIGlmIChzcmNQYWdlID09PSAnL2luZGV4Jykge1xuICAgICAgICAvLyB3ZSBhbHdheXMgbm9ybWFsaXplIC9pbmRleCBzcGVjaWZpY2FsbHlcbiAgICAgICAgc3JjUGFnZSA9ICcvJztcbiAgICB9XG4gICAgY29uc3QgbXVsdGlab25lRHJhZnRNb2RlID0gcHJvY2Vzcy5lbnYuX19ORVhUX01VTFRJX1pPTkVfRFJBRlRfTU9ERTtcbiAgICBjb25zdCBwcmVwYXJlUmVzdWx0ID0gYXdhaXQgcm91dGVNb2R1bGUucHJlcGFyZShyZXEsIHJlcywge1xuICAgICAgICBzcmNQYWdlLFxuICAgICAgICBtdWx0aVpvbmVEcmFmdE1vZGVcbiAgICB9KTtcbiAgICBpZiAoIXByZXBhcmVSZXN1bHQpIHtcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDA7XG4gICAgICAgIHJlcy5lbmQoJ0JhZCBSZXF1ZXN0Jyk7XG4gICAgICAgIGN0eC53YWl0VW50aWwgPT0gbnVsbCA/IHZvaWQgMCA6IGN0eC53YWl0VW50aWwuY2FsbChjdHgsIFByb21pc2UucmVzb2x2ZSgpKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHsgYnVpbGRJZCwgcGFyYW1zLCBuZXh0Q29uZmlnLCBpc0RyYWZ0TW9kZSwgcHJlcmVuZGVyTWFuaWZlc3QsIHJvdXRlclNlcnZlckNvbnRleHQsIGlzT25EZW1hbmRSZXZhbGlkYXRlLCByZXZhbGlkYXRlT25seUdlbmVyYXRlZCwgcmVzb2x2ZWRQYXRobmFtZSB9ID0gcHJlcGFyZVJlc3VsdDtcbiAgICBjb25zdCBub3JtYWxpemVkU3JjUGFnZSA9IG5vcm1hbGl6ZUFwcFBhdGgoc3JjUGFnZSk7XG4gICAgbGV0IGlzSXNyID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXSB8fCBwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgIGlmIChpc0lzciAmJiAhaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgY29uc3QgaXNQcmVyZW5kZXJlZCA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICAgICAgY29uc3QgcHJlcmVuZGVySW5mbyA9IHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdO1xuICAgICAgICBpZiAocHJlcmVuZGVySW5mbykge1xuICAgICAgICAgICAgaWYgKHByZXJlbmRlckluZm8uZmFsbGJhY2sgPT09IGZhbHNlICYmICFpc1ByZXJlbmRlcmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vRmFsbGJhY2tFcnJvcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBjYWNoZUtleSA9IG51bGw7XG4gICAgaWYgKGlzSXNyICYmICFyb3V0ZU1vZHVsZS5pc0RldiAmJiAhaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgY2FjaGVLZXkgPSByZXNvbHZlZFBhdGhuYW1lO1xuICAgICAgICAvLyBlbnN1cmUgL2luZGV4IGFuZCAvIGlzIG5vcm1hbGl6ZWQgdG8gb25lIGtleVxuICAgICAgICBjYWNoZUtleSA9IGNhY2hlS2V5ID09PSAnL2luZGV4JyA/ICcvJyA6IGNhY2hlS2V5O1xuICAgIH1cbiAgICBjb25zdCBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSA9IC8vIElmIHdlJ3JlIGluIGRldmVsb3BtZW50LCB3ZSBhbHdheXMgc3VwcG9ydCBkeW5hbWljIEhUTUxcbiAgICByb3V0ZU1vZHVsZS5pc0RldiA9PT0gdHJ1ZSB8fCAvLyBJZiB0aGlzIGlzIG5vdCBTU0cgb3IgZG9lcyBub3QgaGF2ZSBzdGF0aWMgcGF0aHMsIHRoZW4gaXQgc3VwcG9ydHNcbiAgICAvLyBkeW5hbWljIEhUTUwuXG4gICAgIWlzSXNyO1xuICAgIC8vIFRoaXMgaXMgYSByZXZhbGlkYXRpb24gcmVxdWVzdCBpZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWNcbiAgICAvLyBwYWdlIGFuZCBpdCBpcyBub3QgYmVpbmcgcmVzdW1lZCBmcm9tIGEgcG9zdHBvbmVkIHJlbmRlciBhbmRcbiAgICAvLyBpdCBpcyBub3QgYSBkeW5hbWljIFJTQyByZXF1ZXN0IHRoZW4gaXQgaXMgYSByZXZhbGlkYXRpb25cbiAgICAvLyByZXF1ZXN0LlxuICAgIGNvbnN0IGlzUmV2YWxpZGF0ZSA9IGlzSXNyICYmICFzdXBwb3J0c0R5bmFtaWNSZXNwb25zZTtcbiAgICBjb25zdCBtZXRob2QgPSByZXEubWV0aG9kIHx8ICdHRVQnO1xuICAgIGNvbnN0IHRyYWNlciA9IGdldFRyYWNlcigpO1xuICAgIGNvbnN0IGFjdGl2ZVNwYW4gPSB0cmFjZXIuZ2V0QWN0aXZlU2NvcGVTcGFuKCk7XG4gICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgICAgcGFyYW1zLFxuICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgcmVuZGVyT3B0czoge1xuICAgICAgICAgICAgZXhwZXJpbWVudGFsOiB7XG4gICAgICAgICAgICAgICAgY2FjaGVDb21wb25lbnRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmNhY2hlQ29tcG9uZW50cyksXG4gICAgICAgICAgICAgICAgYXV0aEludGVycnVwdHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuYXV0aEludGVycnVwdHMpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UsXG4gICAgICAgICAgICBpbmNyZW1lbnRhbENhY2hlOiBnZXRSZXF1ZXN0TWV0YShyZXEsICdpbmNyZW1lbnRhbENhY2hlJyksXG4gICAgICAgICAgICBjYWNoZUxpZmVQcm9maWxlczogKF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbCA9IG5leHRDb25maWcuZXhwZXJpbWVudGFsKSA9PSBudWxsID8gdm9pZCAwIDogX25leHRDb25maWdfZXhwZXJpbWVudGFsLmNhY2hlTGlmZSxcbiAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgIHdhaXRVbnRpbDogY3R4LndhaXRVbnRpbCxcbiAgICAgICAgICAgIG9uQ2xvc2U6IChjYik9PntcbiAgICAgICAgICAgICAgICByZXMub24oJ2Nsb3NlJywgY2IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQWZ0ZXJUYXNrRXJyb3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIG9uSW5zdHJ1bWVudGF0aW9uUmVxdWVzdEVycm9yOiAoZXJyb3IsIF9yZXF1ZXN0LCBlcnJvckNvbnRleHQpPT5yb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVycm9yLCBlcnJvckNvbnRleHQsIHJvdXRlclNlcnZlckNvbnRleHQpXG4gICAgICAgIH0sXG4gICAgICAgIHNoYXJlZENvbnRleHQ6IHtcbiAgICAgICAgICAgIGJ1aWxkSWRcbiAgICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgbm9kZU5leHRSZXEgPSBuZXcgTm9kZU5leHRSZXF1ZXN0KHJlcSk7XG4gICAgY29uc3Qgbm9kZU5leHRSZXMgPSBuZXcgTm9kZU5leHRSZXNwb25zZShyZXMpO1xuICAgIGNvbnN0IG5leHRSZXEgPSBOZXh0UmVxdWVzdEFkYXB0ZXIuZnJvbU5vZGVOZXh0UmVxdWVzdChub2RlTmV4dFJlcSwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZShyZXMpKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBpbnZva2VSb3V0ZU1vZHVsZSA9IGFzeW5jIChzcGFuKT0+e1xuICAgICAgICAgICAgcmV0dXJuIHJvdXRlTW9kdWxlLmhhbmRsZShuZXh0UmVxLCBjb250ZXh0KS5maW5hbGx5KCgpPT57XG4gICAgICAgICAgICAgICAgaWYgKCFzcGFuKSByZXR1cm47XG4gICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgJ2h0dHAuc3RhdHVzX2NvZGUnOiByZXMuc3RhdHVzQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgJ25leHQucnNjJzogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByb290U3BhbkF0dHJpYnV0ZXMgPSB0cmFjZXIuZ2V0Um9vdFNwYW5BdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgICAgICAgLy8gV2Ugd2VyZSB1bmFibGUgdG8gZ2V0IGF0dHJpYnV0ZXMsIHByb2JhYmx5IE9URUwgaXMgbm90IGVuYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAoIXJvb3RTcGFuQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpICE9PSBCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVW5leHBlY3RlZCByb290IHNwYW4gdHlwZSAnJHtyb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnNwYW5fdHlwZScpfScuIFBsZWFzZSByZXBvcnQgdGhpcyBOZXh0LmpzIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS92ZXJjZWwvbmV4dC5qc2ApO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvdXRlID0gcm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5yb3V0ZScpO1xuICAgICAgICAgICAgICAgIGlmIChyb3V0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gYCR7bWV0aG9kfSAke3JvdXRlfWA7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnNwYW5fbmFtZSc6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShuYW1lKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUoYCR7bWV0aG9kfSAke3JlcS51cmx9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGhhbmRsZVJlc3BvbnNlID0gYXN5bmMgKGN1cnJlbnRTcGFuKT0+e1xuICAgICAgICAgICAgdmFyIF9jYWNoZUVudHJ5X3ZhbHVlO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VHZW5lcmF0b3IgPSBhc3luYyAoeyBwcmV2aW91c0NhY2hlRW50cnkgfSk9PntcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNPbkRlbWFuZFJldmFsaWRhdGUgJiYgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQgJiYgIXByZXZpb3VzQ2FjaGVFbnRyeSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1c0NvZGUgPSA0MDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbi1kZW1hbmQgcmV2YWxpZGF0ZSBhbHdheXMgc2V0cyB0aGlzIGhlYWRlclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcigneC1uZXh0anMtY2FjaGUnLCAnUkVWQUxJREFURUQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5lbmQoJ1RoaXMgcGFnZSBjb3VsZCBub3QgYmUgZm91bmQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaW52b2tlUm91dGVNb2R1bGUoY3VycmVudFNwYW4pO1xuICAgICAgICAgICAgICAgICAgICByZXEuZmV0Y2hNZXRyaWNzID0gY29udGV4dC5yZW5kZXJPcHRzLmZldGNoTWV0cmljcztcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBlbmRpbmdXYWl0VW50aWwgPSBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbDtcbiAgICAgICAgICAgICAgICAgICAgLy8gQXR0ZW1wdCB1c2luZyBwcm92aWRlZCB3YWl0VW50aWwgaWYgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0J3Mgbm90IHdlIGZhbGxiYWNrIHRvIHNlbmRSZXNwb25zZSdzIGhhbmRsaW5nXG4gICAgICAgICAgICAgICAgICAgIGlmIChwZW5kaW5nV2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3R4LndhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC53YWl0VW50aWwocGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1dhaXRVbnRpbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZVRhZ3MgPSBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkVGFncztcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljIHJlc3BvbnNlLCB3ZSBjYW4gY2FjaGUgaXQgc28gbG9uZ1xuICAgICAgICAgICAgICAgICAgICAvLyBhcyBpdCdzIG5vdCBlZGdlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJc3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3B5IHRoZSBoZWFkZXJzIGZyb20gdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IHRvTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMocmVzcG9uc2UuaGVhZGVycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVUYWdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1tORVhUX0NBQ0hFX1RBR1NfSEVBREVSXSA9IGNhY2hlVGFncztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaGVhZGVyc1snY29udGVudC10eXBlJ10gJiYgYmxvYi50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1snY29udGVudC10eXBlJ10gPSBibG9iLnR5cGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXZhbGlkYXRlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA+PSBJTkZJTklURV9DQUNIRSA/IGZhbHNlIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleHBpcmUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZSA+PSBJTkZJTklURV9DQUNIRSA/IHVuZGVmaW5lZCA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGNhY2hlIGVudHJ5IGZvciB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtpbmQ6IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBCdWZmZXIuZnJvbShhd2FpdCBibG9iLmFycmF5QnVmZmVyKCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZUNvbnRyb2w6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZUVudHJ5O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VuZCByZXNwb25zZSB3aXRob3V0IGNhY2hpbmcgaWYgbm90IElTUlxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgcmVzcG9uc2UsIGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgaXMgYSBiYWNrZ3JvdW5kIHJldmFsaWRhdGUgd2UgbmVlZCB0byByZXBvcnRcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlcXVlc3QgZXJyb3IgaGVyZSBhcyBpdCB3b24ndCBiZSBidWJibGVkXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IHByZXZpb3VzQ2FjaGVFbnRyeS5pc1N0YWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IHNyY1BhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVUeXBlOiAncm91dGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGVSZWFzb246IGdldFJldmFsaWRhdGVSZWFzb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJvdXRlclNlcnZlckNvbnRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IGF3YWl0IHJvdXRlTW9kdWxlLmhhbmRsZVJlc3BvbnNlKHtcbiAgICAgICAgICAgICAgICByZXEsXG4gICAgICAgICAgICAgICAgbmV4dENvbmZpZyxcbiAgICAgICAgICAgICAgICBjYWNoZUtleSxcbiAgICAgICAgICAgICAgICByb3V0ZUtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgICAgICAgICAgaXNGYWxsYmFjazogZmFsc2UsXG4gICAgICAgICAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgICAgICAgICAgaXNSb3V0ZVBQUkVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlR2VuZXJhdG9yLFxuICAgICAgICAgICAgICAgIHdhaXRVbnRpbDogY3R4LndhaXRVbnRpbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyB3ZSBkb24ndCBjcmVhdGUgYSBjYWNoZUVudHJ5IGZvciBJU1JcbiAgICAgICAgICAgIGlmICghaXNJc3IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoY2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogKF9jYWNoZUVudHJ5X3ZhbHVlID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlLmtpbmQpICE9PSBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9jYWNoZUVudHJ5X3ZhbHVlMTtcbiAgICAgICAgICAgICAgICB0aHJvdyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3IEVycm9yKGBJbnZhcmlhbnQ6IGFwcC1yb3V0ZSByZWNlaXZlZCBpbnZhbGlkIGNhY2hlIGVudHJ5ICR7Y2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogKF9jYWNoZUVudHJ5X3ZhbHVlMSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZTEua2luZH1gKSwgXCJfX05FWFRfRVJST1JfQ09ERVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkU3MDFcIixcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcigneC1uZXh0anMtY2FjaGUnLCBpc09uRGVtYW5kUmV2YWxpZGF0ZSA/ICdSRVZBTElEQVRFRCcgOiBjYWNoZUVudHJ5LmlzTWlzcyA/ICdNSVNTJyA6IGNhY2hlRW50cnkuaXNTdGFsZSA/ICdTVEFMRScgOiAnSElUJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBEcmFmdCBtb2RlIHNob3VsZCBuZXZlciBiZSBjYWNoZWRcbiAgICAgICAgICAgIGlmIChpc0RyYWZ0TW9kZSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCAncHJpdmF0ZSwgbm8tY2FjaGUsIG5vLXN0b3JlLCBtYXgtYWdlPTAsIG11c3QtcmV2YWxpZGF0ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IGZyb21Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhjYWNoZUVudHJ5LnZhbHVlLmhlYWRlcnMpO1xuICAgICAgICAgICAgaWYgKCEoZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiBpc0lzcikpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLmRlbGV0ZShORVhUX0NBQ0hFX1RBR1NfSEVBREVSKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIElmIGNhY2hlIGNvbnRyb2wgaXMgYWxyZWFkeSBzZXQgb24gdGhlIHJlc3BvbnNlIHdlIGRvbid0XG4gICAgICAgICAgICAvLyBvdmVycmlkZSBpdCB0byBhbGxvdyB1c2VycyB0byBjdXN0b21pemUgaXQgdmlhIG5leHQuY29uZmlnXG4gICAgICAgICAgICBpZiAoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wgJiYgIXJlcy5nZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnKSAmJiAhaGVhZGVycy5nZXQoJ0NhY2hlLUNvbnRyb2wnKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuc2V0KCdDYWNoZS1Db250cm9sJywgZ2V0Q2FjaGVDb250cm9sSGVhZGVyKGNhY2hlRW50cnkuY2FjaGVDb250cm9sKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCBuZXcgUmVzcG9uc2UoY2FjaGVFbnRyeS52YWx1ZS5ib2R5LCB7XG4gICAgICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgICAgICBzdGF0dXM6IGNhY2hlRW50cnkudmFsdWUuc3RhdHVzIHx8IDIwMFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIC8vIFRPRE86IGFjdGl2ZVNwYW4gY29kZSBwYXRoIGlzIGZvciB3aGVuIHdyYXBwZWQgYnlcbiAgICAgICAgLy8gbmV4dC1zZXJ2ZXIgY2FuIGJlIHJlbW92ZWQgd2hlbiB0aGlzIGlzIG5vIGxvbmdlciB1c2VkXG4gICAgICAgIGlmIChhY3RpdmVTcGFuKSB7XG4gICAgICAgICAgICBhd2FpdCBoYW5kbGVSZXNwb25zZShhY3RpdmVTcGFuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IHRyYWNlci53aXRoUHJvcGFnYXRlZENvbnRleHQocmVxLmhlYWRlcnMsICgpPT50cmFjZXIudHJhY2UoQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCwge1xuICAgICAgICAgICAgICAgICAgICBzcGFuTmFtZTogYCR7bWV0aG9kfSAke3JlcS51cmx9YCxcbiAgICAgICAgICAgICAgICAgICAga2luZDogU3BhbktpbmQuU0VSVkVSLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5tZXRob2QnOiBtZXRob2QsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC50YXJnZXQnOiByZXEudXJsXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBoYW5kbGVSZXNwb25zZSkpO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmICghKGVyciBpbnN0YW5jZW9mIE5vRmFsbGJhY2tFcnJvcikpIHtcbiAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogbm9ybWFsaXplZFNyY1BhZ2UsXG4gICAgICAgICAgICAgICAgcm91dGVUeXBlOiAncm91dGUnLFxuICAgICAgICAgICAgICAgIHJldmFsaWRhdGVSZWFzb246IGdldFJldmFsaWRhdGVSZWFzb24oe1xuICAgICAgICAgICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgIGlzT25EZW1hbmRSZXZhbGlkYXRlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJldGhyb3cgc28gdGhhdCB3ZSBjYW4gaGFuZGxlIHNlcnZpbmcgZXJyb3IgcGFnZVxuICAgICAgICAvLyBJZiB0aGlzIGlzIGR1cmluZyBzdGF0aWMgZ2VuZXJhdGlvbiwgdGhyb3cgdGhlIGVycm9yIGFnYWluLlxuICAgICAgICBpZiAoaXNJc3IpIHRocm93IGVycjtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBzZW5kIGEgNTAwIHJlc3BvbnNlLlxuICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCBuZXcgUmVzcG9uc2UobnVsbCwge1xuICAgICAgICAgICAgc3RhdHVzOiA1MDBcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXBcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frsvp%2F%5Btoken%5D%2Froute&page=%2Fapi%2Frsvp%2F%5Btoken%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frsvp%2F%5Btoken%5D%2Froute.ts&appDir=%2FUsers%2Fshiqi%2FDocuments%2Fshiqi%2Fkidparty%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshiqi%2FDocuments%2Fshiqi%2Fkidparty&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/rsvp/[token]/route.ts":
/*!*******************************************!*\
  !*** ./src/app/api/rsvp/[token]/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_auth_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth-config */ \"(rsc)/./src/lib/auth-config.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_security__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/security */ \"(rsc)/./src/lib/security.ts\");\n/* harmony import */ var _lib_email__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/email */ \"(rsc)/./src/lib/email.ts\");\n\n\n\n\n\n\nasync function GET(request, { params }) {\n    try {\n        const { token } = await params;\n        // Validate token format\n        if (!(0,_lib_security__WEBPACK_IMPORTED_MODULE_4__.isValidUUID)(token)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Invalid invitation link'\n            }, {\n                status: 400\n            });\n        }\n        const party = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.party.findUnique({\n            where: {\n                publicRsvpToken: token\n            },\n            select: {\n                id: true,\n                childName: true,\n                childAge: true,\n                eventDatetime: true,\n                location: true,\n                theme: true,\n                notes: true\n            }\n        });\n        if (!party) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Party not found'\n            }, {\n                status: 404\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(party);\n    } catch (error) {\n        console.error('Fetch party by token error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request, { params }) {\n    try {\n        const { token } = await params;\n        // Validate token format\n        if (!(0,_lib_security__WEBPACK_IMPORTED_MODULE_4__.isValidUUID)(token)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Invalid invitation link'\n            }, {\n                status: 400\n            });\n        }\n        // Verify user authentication using NextAuth session\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth_config__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session || !session.user?.id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Authentication required'\n            }, {\n                status: 401\n            });\n        }\n        const user = {\n            id: session.user.id,\n            email: session.user.email\n        };\n        const party = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.party.findUnique({\n            where: {\n                publicRsvpToken: token\n            },\n            include: {\n                user: true // Include party host details for email notifications\n            }\n        });\n        if (!party) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Party not found'\n            }, {\n                status: 404\n            });\n        }\n        const body = await request.json();\n        // Validate and sanitize input - no email needed since user is authenticated\n        const validatedData = {\n            parentName: (0,_lib_security__WEBPACK_IMPORTED_MODULE_4__.sanitizeInput)(body.parentName || ''),\n            childName: (0,_lib_security__WEBPACK_IMPORTED_MODULE_4__.sanitizeInput)(body.childName || ''),\n            phone: body.phone ? (0,_lib_security__WEBPACK_IMPORTED_MODULE_4__.sanitizeInput)(body.phone) : undefined,\n            status: body.status,\n            numChildren: parseInt(body.numChildren) || 0,\n            parentStaying: Boolean(body.parentStaying),\n            allergies: body.allergies ? (0,_lib_security__WEBPACK_IMPORTED_MODULE_4__.sanitizeInput)(body.allergies) : undefined,\n            message: body.message ? (0,_lib_security__WEBPACK_IMPORTED_MODULE_4__.sanitizeInput)(body.message) : undefined\n        };\n        const { parentName, childName, phone, status, numChildren, parentStaying, allergies, message } = validatedData;\n        // Find or create guest by user and party\n        let existingGuest = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.guest.findFirst({\n            where: {\n                partyId: party.id,\n                email: user.email\n            },\n            include: {\n                rsvp: true\n            }\n        });\n        if (existingGuest) {\n            // Update existing guest\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.guest.update({\n                where: {\n                    id: existingGuest.id\n                },\n                data: {\n                    parentName,\n                    childName,\n                    phone: phone || null,\n                    userId: user.id\n                }\n            });\n            // Update or create RSVP\n            if (existingGuest.rsvp) {\n                await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.rSVP.update({\n                    where: {\n                        id: existingGuest.rsvp.id\n                    },\n                    data: {\n                        status,\n                        numChildren,\n                        parentStaying,\n                        allergies: allergies || null,\n                        message: message || null\n                    }\n                });\n            } else {\n                await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.rSVP.create({\n                    data: {\n                        guestId: existingGuest.id,\n                        status,\n                        numChildren,\n                        parentStaying,\n                        allergies: allergies || null,\n                        message: message || null\n                    }\n                });\n            }\n        } else {\n            // Create new guest and RSVP linked to authenticated user\n            const newGuest = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.guest.create({\n                data: {\n                    partyId: party.id,\n                    parentName,\n                    childName,\n                    email: user.email,\n                    phone: phone || null,\n                    userId: user.id\n                }\n            });\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.rSVP.create({\n                data: {\n                    guestId: newGuest.id,\n                    status,\n                    numChildren,\n                    parentStaying,\n                    allergies: allergies || null,\n                    message: message || null\n                }\n            });\n        }\n        // Send email notifications\n        try {\n            // Email to guest confirming their RSVP\n            const guestConfirmationEmail = (0,_lib_email__WEBPACK_IMPORTED_MODULE_5__.generateRSVPConfirmationEmail)({\n                childName: party.childName,\n                childAge: party.childAge,\n                eventDatetime: party.eventDatetime,\n                location: party.location,\n                theme: party.theme || undefined,\n                notes: party.notes || undefined\n            }, {\n                parentName,\n                childName,\n                status,\n                numChildren,\n                parentStaying,\n                allergies: allergies || undefined,\n                message: message || undefined\n            });\n            await (0,_lib_email__WEBPACK_IMPORTED_MODULE_5__.sendEmail)({\n                to: user.email,\n                subject: guestConfirmationEmail.subject,\n                text: guestConfirmationEmail.text\n            });\n            // Email to party host about new RSVP\n            const hostNotificationEmail = (0,_lib_email__WEBPACK_IMPORTED_MODULE_5__.generateHostRSVPNotificationEmail)({\n                childName: party.childName,\n                childAge: party.childAge,\n                eventDatetime: party.eventDatetime,\n                location: party.location\n            }, {\n                parentName,\n                childName,\n                status,\n                numChildren,\n                parentStaying,\n                allergies: allergies || undefined,\n                message: message || undefined\n            });\n            await (0,_lib_email__WEBPACK_IMPORTED_MODULE_5__.sendEmail)({\n                to: party.user.email,\n                subject: hostNotificationEmail.subject,\n                text: hostNotificationEmail.text\n            });\n        } catch (emailError) {\n            console.error('Failed to send email notifications:', emailError);\n        // Don't fail the RSVP if email fails\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: 'RSVP submitted successfully'\n        });\n    } catch (error) {\n        console.error('RSVP submission error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Failed to submit RSVP'\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN0QjtZQUdGLE1BQU1oQyxxREFBU0EsQ0FBQztnQkFDZG9ELElBQUkzQixLQUFLQyxLQUFLO2dCQUNkMkIsU0FBU0YsdUJBQXVCRSxPQUFPO2dCQUN2Q0MsTUFBTUgsdUJBQXVCRyxJQUFJO1lBQ25DO1lBRUEscUNBQXFDO1lBQ3JDLE1BQU1DLHdCQUF3QnJELDZFQUFpQ0EsQ0FDN0Q7Z0JBQ0VjLFdBQVdOLE1BQU1NLFNBQVM7Z0JBQzFCQyxVQUFVUCxNQUFNTyxRQUFRO2dCQUN4QkMsZUFBZVIsTUFBTVEsYUFBYTtnQkFDbENDLFVBQVVULE1BQU1TLFFBQVE7WUFDMUIsR0FDQTtnQkFDRVc7Z0JBQ0FkO2dCQUNBUDtnQkFDQXdCO2dCQUNBRTtnQkFDQUUsV0FBV0EsYUFBYUw7Z0JBQ3hCTSxTQUFTQSxXQUFXTjtZQUN0QjtZQUdGLE1BQU1oQyxxREFBU0EsQ0FBQztnQkFDZG9ELElBQUkxQyxNQUFNZSxJQUFJLENBQUNDLEtBQUs7Z0JBQ3BCMkIsU0FBU0Usc0JBQXNCRixPQUFPO2dCQUN0Q0MsTUFBTUMsc0JBQXNCRCxJQUFJO1lBQ2xDO1FBQ0YsRUFBRSxPQUFPRSxZQUFZO1lBQ25CbEMsUUFBUWQsS0FBSyxDQUFDLHVDQUF1Q2dEO1FBQ3JELHFDQUFxQztRQUN2QztRQUVBLE9BQU85RCxxREFBWUEsQ0FBQ2EsSUFBSSxDQUFDO1lBQUUrQixTQUFTO1FBQThCO0lBQ3BFLEVBQUUsT0FBTzlCLE9BQU87UUFDZGMsUUFBUWQsS0FBSyxDQUFDLDBCQUEwQkE7UUFDeEMsT0FBT2QscURBQVlBLENBQUNhLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUF3QixHQUNqQztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL3NoaXFpL0RvY3VtZW50cy9zaGlxaS9raWRwYXJ0eS9zcmMvYXBwL2FwaS9yc3ZwL1t0b2tlbl0vcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gJ25leHQtYXV0aCdcbmltcG9ydCB7IGF1dGhPcHRpb25zIH0gZnJvbSAnQC9saWIvYXV0aC1jb25maWcnXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tICdAL2xpYi9wcmlzbWEnXG5pbXBvcnQgeyBzYW5pdGl6ZUlucHV0LCBpc1ZhbGlkRW1haWwsIGlzVmFsaWRVVUlEIH0gZnJvbSAnQC9saWIvc2VjdXJpdHknXG5pbXBvcnQgeyByc3ZwU2NoZW1hIH0gZnJvbSAnQC9saWIvdmFsaWRhdGlvbnMnXG5pbXBvcnQgeyBzZW5kRW1haWwsIGdlbmVyYXRlUlNWUENvbmZpcm1hdGlvbkVtYWlsLCBnZW5lcmF0ZUhvc3RSU1ZQTm90aWZpY2F0aW9uRW1haWwgfSBmcm9tICdAL2xpYi9lbWFpbCdcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiBQcm9taXNlPHsgdG9rZW46IHN0cmluZyB9PiB9XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHRva2VuIH0gPSBhd2FpdCBwYXJhbXNcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSB0b2tlbiBmb3JtYXRcbiAgICBpZiAoIWlzVmFsaWRVVUlEKHRva2VuKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGludml0YXRpb24gbGluaycgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cblxuICAgIGNvbnN0IHBhcnR5ID0gYXdhaXQgcHJpc21hLnBhcnR5LmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgcHVibGljUnN2cFRva2VuOiB0b2tlbiB9LFxuICAgICAgc2VsZWN0OiB7XG4gICAgICAgIGlkOiB0cnVlLFxuICAgICAgICBjaGlsZE5hbWU6IHRydWUsXG4gICAgICAgIGNoaWxkQWdlOiB0cnVlLFxuICAgICAgICBldmVudERhdGV0aW1lOiB0cnVlLFxuICAgICAgICBsb2NhdGlvbjogdHJ1ZSxcbiAgICAgICAgdGhlbWU6IHRydWUsXG4gICAgICAgIG5vdGVzOiB0cnVlLFxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAoIXBhcnR5KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1BhcnR5IG5vdCBmb3VuZCcgfSwgeyBzdGF0dXM6IDQwNCB9KVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihwYXJ0eSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGZXRjaCBwYXJ0eSBieSB0b2tlbiBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IFByb21pc2U8eyB0b2tlbjogc3RyaW5nIH0+IH1cbikge1xuICB0cnkge1xuICAgIGNvbnN0IHsgdG9rZW4gfSA9IGF3YWl0IHBhcmFtc1xuICAgIFxuICAgIC8vIFZhbGlkYXRlIHRva2VuIGZvcm1hdFxuICAgIGlmICghaXNWYWxpZFVVSUQodG9rZW4pKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgaW52aXRhdGlvbiBsaW5rJyB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuXG4gICAgLy8gVmVyaWZ5IHVzZXIgYXV0aGVudGljYXRpb24gdXNpbmcgTmV4dEF1dGggc2Vzc2lvblxuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKVxuICAgIGlmICghc2Vzc2lvbiB8fCAhc2Vzc2lvbi51c2VyPy5pZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMSB9KVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSB7XG4gICAgICBpZDogc2Vzc2lvbi51c2VyLmlkLFxuICAgICAgZW1haWw6IHNlc3Npb24udXNlci5lbWFpbFxuICAgIH1cblxuICAgIGNvbnN0IHBhcnR5ID0gYXdhaXQgcHJpc21hLnBhcnR5LmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgcHVibGljUnN2cFRva2VuOiB0b2tlbiB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICB1c2VyOiB0cnVlIC8vIEluY2x1ZGUgcGFydHkgaG9zdCBkZXRhaWxzIGZvciBlbWFpbCBub3RpZmljYXRpb25zXG4gICAgICB9XG4gICAgfSlcblxuICAgIGlmICghcGFydHkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnUGFydHkgbm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pXG4gICAgfVxuXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG4gICAgXG4gICAgLy8gVmFsaWRhdGUgYW5kIHNhbml0aXplIGlucHV0IC0gbm8gZW1haWwgbmVlZGVkIHNpbmNlIHVzZXIgaXMgYXV0aGVudGljYXRlZFxuICAgIGNvbnN0IHZhbGlkYXRlZERhdGEgPSB7XG4gICAgICBwYXJlbnROYW1lOiBzYW5pdGl6ZUlucHV0KGJvZHkucGFyZW50TmFtZSB8fCAnJyksXG4gICAgICBjaGlsZE5hbWU6IHNhbml0aXplSW5wdXQoYm9keS5jaGlsZE5hbWUgfHwgJycpLFxuICAgICAgcGhvbmU6IGJvZHkucGhvbmUgPyBzYW5pdGl6ZUlucHV0KGJvZHkucGhvbmUpIDogdW5kZWZpbmVkLFxuICAgICAgc3RhdHVzOiBib2R5LnN0YXR1cyxcbiAgICAgIG51bUNoaWxkcmVuOiBwYXJzZUludChib2R5Lm51bUNoaWxkcmVuKSB8fCAwLFxuICAgICAgcGFyZW50U3RheWluZzogQm9vbGVhbihib2R5LnBhcmVudFN0YXlpbmcpLFxuICAgICAgYWxsZXJnaWVzOiBib2R5LmFsbGVyZ2llcyA/IHNhbml0aXplSW5wdXQoYm9keS5hbGxlcmdpZXMpIDogdW5kZWZpbmVkLFxuICAgICAgbWVzc2FnZTogYm9keS5tZXNzYWdlID8gc2FuaXRpemVJbnB1dChib2R5Lm1lc3NhZ2UpIDogdW5kZWZpbmVkLFxuICAgIH1cblxuICAgIGNvbnN0IHtcbiAgICAgIHBhcmVudE5hbWUsXG4gICAgICBjaGlsZE5hbWUsXG4gICAgICBwaG9uZSxcbiAgICAgIHN0YXR1cyxcbiAgICAgIG51bUNoaWxkcmVuLFxuICAgICAgcGFyZW50U3RheWluZyxcbiAgICAgIGFsbGVyZ2llcyxcbiAgICAgIG1lc3NhZ2UsXG4gICAgfSA9IHZhbGlkYXRlZERhdGFcblxuICAgIC8vIEZpbmQgb3IgY3JlYXRlIGd1ZXN0IGJ5IHVzZXIgYW5kIHBhcnR5XG4gICAgbGV0IGV4aXN0aW5nR3Vlc3QgPSBhd2FpdCBwcmlzbWEuZ3Vlc3QuZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHBhcnR5SWQ6IHBhcnR5LmlkLFxuICAgICAgICBlbWFpbDogdXNlci5lbWFpbFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgcnN2cDogdHJ1ZVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpZiAoZXhpc3RpbmdHdWVzdCkge1xuICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIGd1ZXN0XG4gICAgICBhd2FpdCBwcmlzbWEuZ3Vlc3QudXBkYXRlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGV4aXN0aW5nR3Vlc3QuaWQgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHBhcmVudE5hbWUsXG4gICAgICAgICAgY2hpbGROYW1lLFxuICAgICAgICAgIHBob25lOiBwaG9uZSB8fCBudWxsLFxuICAgICAgICAgIHVzZXJJZDogdXNlci5pZCwgLy8gTGluayB0byBhdXRoZW50aWNhdGVkIHVzZXJcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgLy8gVXBkYXRlIG9yIGNyZWF0ZSBSU1ZQXG4gICAgICBpZiAoZXhpc3RpbmdHdWVzdC5yc3ZwKSB7XG4gICAgICAgIGF3YWl0IHByaXNtYS5yU1ZQLnVwZGF0ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IGV4aXN0aW5nR3Vlc3QucnN2cC5pZCB9LFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICAgIG51bUNoaWxkcmVuLFxuICAgICAgICAgICAgcGFyZW50U3RheWluZyxcbiAgICAgICAgICAgIGFsbGVyZ2llczogYWxsZXJnaWVzIHx8IG51bGwsXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlIHx8IG51bGwsXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgcHJpc21hLnJTVlAuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBndWVzdElkOiBleGlzdGluZ0d1ZXN0LmlkLFxuICAgICAgICAgICAgc3RhdHVzLFxuICAgICAgICAgICAgbnVtQ2hpbGRyZW4sXG4gICAgICAgICAgICBwYXJlbnRTdGF5aW5nLFxuICAgICAgICAgICAgYWxsZXJnaWVzOiBhbGxlcmdpZXMgfHwgbnVsbCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UgfHwgbnVsbCxcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENyZWF0ZSBuZXcgZ3Vlc3QgYW5kIFJTVlAgbGlua2VkIHRvIGF1dGhlbnRpY2F0ZWQgdXNlclxuICAgICAgY29uc3QgbmV3R3Vlc3QgPSBhd2FpdCBwcmlzbWEuZ3Vlc3QuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHBhcnR5SWQ6IHBhcnR5LmlkLFxuICAgICAgICAgIHBhcmVudE5hbWUsXG4gICAgICAgICAgY2hpbGROYW1lLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgIHBob25lOiBwaG9uZSB8fCBudWxsLFxuICAgICAgICAgIHVzZXJJZDogdXNlci5pZCwgLy8gTGluayB0byBhdXRoZW50aWNhdGVkIHVzZXJcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgYXdhaXQgcHJpc21hLnJTVlAuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGd1ZXN0SWQ6IG5ld0d1ZXN0LmlkLFxuICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICBudW1DaGlsZHJlbixcbiAgICAgICAgICBwYXJlbnRTdGF5aW5nLFxuICAgICAgICAgIGFsbGVyZ2llczogYWxsZXJnaWVzIHx8IG51bGwsXG4gICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSB8fCBudWxsLFxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIFNlbmQgZW1haWwgbm90aWZpY2F0aW9uc1xuICAgIHRyeSB7XG4gICAgICAvLyBFbWFpbCB0byBndWVzdCBjb25maXJtaW5nIHRoZWlyIFJTVlBcbiAgICAgIGNvbnN0IGd1ZXN0Q29uZmlybWF0aW9uRW1haWwgPSBnZW5lcmF0ZVJTVlBDb25maXJtYXRpb25FbWFpbChcbiAgICAgICAge1xuICAgICAgICAgIGNoaWxkTmFtZTogcGFydHkuY2hpbGROYW1lLFxuICAgICAgICAgIGNoaWxkQWdlOiBwYXJ0eS5jaGlsZEFnZSxcbiAgICAgICAgICBldmVudERhdGV0aW1lOiBwYXJ0eS5ldmVudERhdGV0aW1lLFxuICAgICAgICAgIGxvY2F0aW9uOiBwYXJ0eS5sb2NhdGlvbixcbiAgICAgICAgICB0aGVtZTogcGFydHkudGhlbWUgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgIG5vdGVzOiBwYXJ0eS5ub3RlcyB8fCB1bmRlZmluZWRcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHBhcmVudE5hbWUsXG4gICAgICAgICAgY2hpbGROYW1lLFxuICAgICAgICAgIHN0YXR1cyxcbiAgICAgICAgICBudW1DaGlsZHJlbixcbiAgICAgICAgICBwYXJlbnRTdGF5aW5nLFxuICAgICAgICAgIGFsbGVyZ2llczogYWxsZXJnaWVzIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlIHx8IHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgICApXG5cbiAgICAgIGF3YWl0IHNlbmRFbWFpbCh7XG4gICAgICAgIHRvOiB1c2VyLmVtYWlsLFxuICAgICAgICBzdWJqZWN0OiBndWVzdENvbmZpcm1hdGlvbkVtYWlsLnN1YmplY3QsXG4gICAgICAgIHRleHQ6IGd1ZXN0Q29uZmlybWF0aW9uRW1haWwudGV4dFxuICAgICAgfSlcblxuICAgICAgLy8gRW1haWwgdG8gcGFydHkgaG9zdCBhYm91dCBuZXcgUlNWUFxuICAgICAgY29uc3QgaG9zdE5vdGlmaWNhdGlvbkVtYWlsID0gZ2VuZXJhdGVIb3N0UlNWUE5vdGlmaWNhdGlvbkVtYWlsKFxuICAgICAgICB7XG4gICAgICAgICAgY2hpbGROYW1lOiBwYXJ0eS5jaGlsZE5hbWUsXG4gICAgICAgICAgY2hpbGRBZ2U6IHBhcnR5LmNoaWxkQWdlLFxuICAgICAgICAgIGV2ZW50RGF0ZXRpbWU6IHBhcnR5LmV2ZW50RGF0ZXRpbWUsXG4gICAgICAgICAgbG9jYXRpb246IHBhcnR5LmxvY2F0aW9uXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwYXJlbnROYW1lLFxuICAgICAgICAgIGNoaWxkTmFtZSxcbiAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgbnVtQ2hpbGRyZW4sXG4gICAgICAgICAgcGFyZW50U3RheWluZyxcbiAgICAgICAgICBhbGxlcmdpZXM6IGFsbGVyZ2llcyB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSB8fCB1bmRlZmluZWRcbiAgICAgICAgfVxuICAgICAgKVxuXG4gICAgICBhd2FpdCBzZW5kRW1haWwoe1xuICAgICAgICB0bzogcGFydHkudXNlci5lbWFpbCxcbiAgICAgICAgc3ViamVjdDogaG9zdE5vdGlmaWNhdGlvbkVtYWlsLnN1YmplY3QsXG4gICAgICAgIHRleHQ6IGhvc3ROb3RpZmljYXRpb25FbWFpbC50ZXh0XG4gICAgICB9KVxuICAgIH0gY2F0Y2ggKGVtYWlsRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzZW5kIGVtYWlsIG5vdGlmaWNhdGlvbnM6JywgZW1haWxFcnJvcilcbiAgICAgIC8vIERvbid0IGZhaWwgdGhlIFJTVlAgaWYgZW1haWwgZmFpbHNcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnUlNWUCBzdWJtaXR0ZWQgc3VjY2Vzc2Z1bGx5JyB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1JTVlAgc3VibWlzc2lvbiBlcnJvcjonLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHN1Ym1pdCBSU1ZQJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFNlcnZlclNlc3Npb24iLCJhdXRoT3B0aW9ucyIsInByaXNtYSIsInNhbml0aXplSW5wdXQiLCJpc1ZhbGlkVVVJRCIsInNlbmRFbWFpbCIsImdlbmVyYXRlUlNWUENvbmZpcm1hdGlvbkVtYWlsIiwiZ2VuZXJhdGVIb3N0UlNWUE5vdGlmaWNhdGlvbkVtYWlsIiwiR0VUIiwicmVxdWVzdCIsInBhcmFtcyIsInRva2VuIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwicGFydHkiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJwdWJsaWNSc3ZwVG9rZW4iLCJzZWxlY3QiLCJpZCIsImNoaWxkTmFtZSIsImNoaWxkQWdlIiwiZXZlbnREYXRldGltZSIsImxvY2F0aW9uIiwidGhlbWUiLCJub3RlcyIsImNvbnNvbGUiLCJQT1NUIiwic2Vzc2lvbiIsInVzZXIiLCJlbWFpbCIsImluY2x1ZGUiLCJib2R5IiwidmFsaWRhdGVkRGF0YSIsInBhcmVudE5hbWUiLCJwaG9uZSIsInVuZGVmaW5lZCIsIm51bUNoaWxkcmVuIiwicGFyc2VJbnQiLCJwYXJlbnRTdGF5aW5nIiwiQm9vbGVhbiIsImFsbGVyZ2llcyIsIm1lc3NhZ2UiLCJleGlzdGluZ0d1ZXN0IiwiZ3Vlc3QiLCJmaW5kRmlyc3QiLCJwYXJ0eUlkIiwicnN2cCIsInVwZGF0ZSIsImRhdGEiLCJ1c2VySWQiLCJyU1ZQIiwiY3JlYXRlIiwiZ3Vlc3RJZCIsIm5ld0d1ZXN0IiwiZ3Vlc3RDb25maXJtYXRpb25FbWFpbCIsInRvIiwic3ViamVjdCIsInRleHQiLCJob3N0Tm90aWZpY2F0aW9uRW1haWwiLCJlbWFpbEVycm9yIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/rsvp/[token]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth-config.ts":
/*!********************************!*\
  !*** ./src/lib/auth-config.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n\n\n\n\nconst authOptions = {\n    debug: false,\n    providers: [\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET\n        }),\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            name: 'credentials',\n            credentials: {\n                email: {\n                    label: 'Email',\n                    type: 'email'\n                },\n                password: {\n                    label: 'Password',\n                    type: 'password'\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    return null;\n                }\n                const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n                    where: {\n                        email: credentials.email\n                    }\n                });\n                if (!user || !user.passwordHash) {\n                    return null;\n                }\n                const isPasswordValid = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_3__.comparePassword)(credentials.password, user.passwordHash);\n                if (!isPasswordValid) {\n                    return null;\n                }\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name,\n                    image: user.image\n                };\n            }\n        })\n    ],\n    session: {\n        strategy: 'jwt',\n        maxAge: 30 * 24 * 60 * 60\n    },\n    callbacks: {\n        jwt: async ({ user, token, account })=>{\n            console.log('JWT Callback:', {\n                hasUser: !!user,\n                hasAccount: !!account,\n                provider: account?.provider,\n                userEmail: user?.email,\n                tokenUserId: token?.userId\n            });\n            // On sign in, populate token with user data\n            if (user && account) {\n                console.log('Sign in detected, setting token data');\n                if (account.provider === 'google' && user.email) {\n                    try {\n                        // Find or create user in database\n                        let dbUser = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n                            where: {\n                                email: user.email\n                            }\n                        });\n                        if (!dbUser) {\n                            console.log('Creating new Google user:', user.email);\n                            dbUser = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.create({\n                                data: {\n                                    email: user.email,\n                                    name: user.name || null,\n                                    image: user.image || null,\n                                    emailVerified: new Date()\n                                }\n                            });\n                        } else {\n                            console.log('Updating existing Google user:', user.email);\n                            dbUser = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.update({\n                                where: {\n                                    id: dbUser.id\n                                },\n                                data: {\n                                    name: user.name || dbUser.name,\n                                    image: user.image || dbUser.image,\n                                    emailVerified: new Date()\n                                }\n                            });\n                        }\n                        // Set token with database user data\n                        token.userId = dbUser.id;\n                        token.email = dbUser.email;\n                        token.name = dbUser.name || undefined;\n                        token.picture = dbUser.image || undefined;\n                        return token;\n                    } catch (error) {\n                        console.error('Database error in JWT callback:', error);\n                        return token;\n                    }\n                } else if (account.provider === 'credentials') {\n                    // For credentials login, user object comes from authorize function\n                    token.userId = user.id;\n                    token.email = user.email;\n                    token.name = user.name || undefined;\n                    token.picture = user.image || undefined;\n                    return token;\n                }\n            }\n            // Return existing token for subsequent requests\n            console.log('Returning token with userId:', token.userId);\n            return token;\n        },\n        session: async ({ session, token })=>{\n            console.log('Session Callback:', {\n                tokenUserId: token?.userId,\n                sessionUser: session?.user\n            });\n            // Only populate session if we have a valid userId in token\n            if (token?.userId) {\n                session.user = {\n                    id: token.userId,\n                    email: token.email || '',\n                    name: token.name || '',\n                    image: token.picture || ''\n                };\n                console.log('Session created with user:', session.user);\n            } else {\n                console.error('No userId in JWT token - session invalid');\n            }\n            return session;\n        },\n        redirect: async ({ url, baseUrl })=>{\n            console.log('Redirect Callback - Processing:', {\n                url,\n                baseUrl\n            });\n            // Handle error redirects\n            if (url.includes('/api/auth/error') || url.includes('error=')) {\n                console.log('Auth error detected, redirecting to login');\n                return `${baseUrl}/login`;\n            }\n            // If it's a relative URL that starts with /, prepend baseUrl\n            if (url.startsWith('/')) {\n                return `${baseUrl}${url}`;\n            }\n            // If it's already a full URL and same origin, allow it\n            if (url.startsWith(baseUrl)) {\n                return url;\n            }\n            // Default fallback\n            return `${baseUrl}/dashboard`;\n        }\n    },\n    pages: {\n        signIn: '/login',\n        error: '/login'\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUlPLE1BQU1TLE1BQU07b0JBQ2hCMUIsT0FBT2lCLE1BQU1qQixLQUFLLElBQUk7b0JBQ3RCRixNQUFNbUIsTUFBTW5CLElBQUksSUFBSTtvQkFDcEJhLE9BQU9NLE1BQU1pQixPQUFPLElBQUk7Z0JBQzFCO2dCQUVBZixRQUFRQyxHQUFHLENBQUMsOEJBQThCUixRQUFRUCxJQUFJO1lBQ3hELE9BQU87Z0JBQ0xjLFFBQVFnQixLQUFLLENBQUM7WUFDaEI7WUFFQSxPQUFPdkI7UUFDVDtRQUNBeUIsVUFBVSxPQUFPLEVBQUVDLEdBQUcsRUFBRUMsT0FBTyxFQUFFO1lBQy9CcEIsUUFBUUMsR0FBRyxDQUFDLG1DQUFtQztnQkFBRWtCO2dCQUFLQztZQUFRO1lBRTlELHlCQUF5QjtZQUN6QixJQUFJRCxJQUFJRSxRQUFRLENBQUMsc0JBQXNCRixJQUFJRSxRQUFRLENBQUMsV0FBVztnQkFDN0RyQixRQUFRQyxHQUFHLENBQUM7Z0JBQ1osT0FBTyxHQUFHbUIsUUFBUSxNQUFNLENBQUM7WUFDM0I7WUFFQSw2REFBNkQ7WUFDN0QsSUFBSUQsSUFBSUcsVUFBVSxDQUFDLE1BQU07Z0JBQ3ZCLE9BQU8sR0FBR0YsVUFBVUQsS0FBSztZQUMzQjtZQUVBLHVEQUF1RDtZQUN2RCxJQUFJQSxJQUFJRyxVQUFVLENBQUNGLFVBQVU7Z0JBQzNCLE9BQU9EO1lBQ1Q7WUFFQSxtQkFBbUI7WUFDbkIsT0FBTyxHQUFHQyxRQUFRLFVBQVUsQ0FBQztRQUMvQjtJQUNGO0lBQ0FHLE9BQU87UUFDTEMsUUFBUTtRQUNSUixPQUFPO0lBQ1Q7QUFDRixFQUFDIiwic291cmNlcyI6WyIvVXNlcnMvc2hpcWkvRG9jdW1lbnRzL3NoaXFpL2tpZHBhcnR5L3NyYy9saWIvYXV0aC1jb25maWcudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSAnbmV4dC1hdXRoJ1xuaW1wb3J0IEdvb2dsZVByb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvZ29vZ2xlJ1xuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFscydcbmltcG9ydCB7IFByaXNtYUFkYXB0ZXIgfSBmcm9tICdAYXV0aC9wcmlzbWEtYWRhcHRlcidcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gJ0AvbGliL3ByaXNtYSdcbmltcG9ydCB7IGNvbXBhcmVQYXNzd29yZCB9IGZyb20gJ0AvbGliL2F1dGgnXG5cbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9uczogTmV4dEF1dGhPcHRpb25zID0ge1xuICBkZWJ1ZzogZmFsc2UsIC8vIERpc2FibGUgZGVidWcgbW9kZSB0byByZWR1Y2UgY29uc29sZSBvdXRwdXRcbiAgcHJvdmlkZXJzOiBbXG4gICAgR29vZ2xlUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQhLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCEsXG4gICAgfSksXG4gICAgQ3JlZGVudGlhbHNQcm92aWRlcih7XG4gICAgICBuYW1lOiAnY3JlZGVudGlhbHMnLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHsgbGFiZWw6ICdFbWFpbCcsIHR5cGU6ICdlbWFpbCcgfSxcbiAgICAgICAgcGFzc3dvcmQ6IHsgbGFiZWw6ICdQYXNzd29yZCcsIHR5cGU6ICdwYXNzd29yZCcgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgICBpZiAoIWNyZWRlbnRpYWxzPy5lbWFpbCB8fCAhY3JlZGVudGlhbHM/LnBhc3N3b3JkKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgICAgICB3aGVyZTogeyBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwgfVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmICghdXNlciB8fCAhdXNlci5wYXNzd29yZEhhc2gpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaXNQYXNzd29yZFZhbGlkID0gYXdhaXQgY29tcGFyZVBhc3N3b3JkKFxuICAgICAgICAgIGNyZWRlbnRpYWxzLnBhc3N3b3JkLFxuICAgICAgICAgIHVzZXIucGFzc3dvcmRIYXNoXG4gICAgICAgIClcblxuICAgICAgICBpZiAoIWlzUGFzc3dvcmRWYWxpZCkge1xuICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgICBpbWFnZTogdXNlci5pbWFnZSxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIF0sXG4gIHNlc3Npb246IHtcbiAgICBzdHJhdGVneTogJ2p3dCcsXG4gICAgbWF4QWdlOiAzMCAqIDI0ICogNjAgKiA2MCwgLy8gMzAgZGF5c1xuICB9LFxuICBjYWxsYmFja3M6IHtcbiAgICBqd3Q6IGFzeW5jICh7IHVzZXIsIHRva2VuLCBhY2NvdW50IH0pID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdKV1QgQ2FsbGJhY2s6JywgeyBcbiAgICAgICAgaGFzVXNlcjogISF1c2VyLFxuICAgICAgICBoYXNBY2NvdW50OiAhIWFjY291bnQsXG4gICAgICAgIHByb3ZpZGVyOiBhY2NvdW50Py5wcm92aWRlcixcbiAgICAgICAgdXNlckVtYWlsOiB1c2VyPy5lbWFpbCxcbiAgICAgICAgdG9rZW5Vc2VySWQ6IHRva2VuPy51c2VySWRcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIE9uIHNpZ24gaW4sIHBvcHVsYXRlIHRva2VuIHdpdGggdXNlciBkYXRhXG4gICAgICBpZiAodXNlciAmJiBhY2NvdW50KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdTaWduIGluIGRldGVjdGVkLCBzZXR0aW5nIHRva2VuIGRhdGEnKVxuICAgICAgICBcbiAgICAgICAgaWYgKGFjY291bnQucHJvdmlkZXIgPT09ICdnb29nbGUnICYmIHVzZXIuZW1haWwpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gRmluZCBvciBjcmVhdGUgdXNlciBpbiBkYXRhYmFzZVxuICAgICAgICAgICAgbGV0IGRiVXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICAgICAgICB3aGVyZTogeyBlbWFpbDogdXNlci5lbWFpbCB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBpZiAoIWRiVXNlcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgbmV3IEdvb2dsZSB1c2VyOicsIHVzZXIuZW1haWwpXG4gICAgICAgICAgICAgIGRiVXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUgfHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgIGltYWdlOiB1c2VyLmltYWdlIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGluZyBleGlzdGluZyBHb29nbGUgdXNlcjonLCB1c2VyLmVtYWlsKVxuICAgICAgICAgICAgICBkYlVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci51cGRhdGUoe1xuICAgICAgICAgICAgICAgIHdoZXJlOiB7IGlkOiBkYlVzZXIuaWQgfSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUgfHwgZGJVc2VyLm5hbWUsXG4gICAgICAgICAgICAgICAgICBpbWFnZTogdXNlci5pbWFnZSB8fCBkYlVzZXIuaW1hZ2UsXG4gICAgICAgICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2V0IHRva2VuIHdpdGggZGF0YWJhc2UgdXNlciBkYXRhXG4gICAgICAgICAgICB0b2tlbi51c2VySWQgPSBkYlVzZXIuaWRcbiAgICAgICAgICAgIHRva2VuLmVtYWlsID0gZGJVc2VyLmVtYWlsXG4gICAgICAgICAgICB0b2tlbi5uYW1lID0gZGJVc2VyLm5hbWUgfHwgdW5kZWZpbmVkXG4gICAgICAgICAgICB0b2tlbi5waWN0dXJlID0gZGJVc2VyLmltYWdlIHx8IHVuZGVmaW5lZFxuICAgICAgICAgICAgcmV0dXJuIHRva2VuXG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIGVycm9yIGluIEpXVCBjYWxsYmFjazonLCBlcnJvcilcbiAgICAgICAgICAgIHJldHVybiB0b2tlblxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChhY2NvdW50LnByb3ZpZGVyID09PSAnY3JlZGVudGlhbHMnKSB7XG4gICAgICAgICAgLy8gRm9yIGNyZWRlbnRpYWxzIGxvZ2luLCB1c2VyIG9iamVjdCBjb21lcyBmcm9tIGF1dGhvcml6ZSBmdW5jdGlvblxuICAgICAgICAgIHRva2VuLnVzZXJJZCA9IHVzZXIuaWRcbiAgICAgICAgICB0b2tlbi5lbWFpbCA9IHVzZXIuZW1haWxcbiAgICAgICAgICB0b2tlbi5uYW1lID0gdXNlci5uYW1lIHx8IHVuZGVmaW5lZFxuICAgICAgICAgIHRva2VuLnBpY3R1cmUgPSB1c2VyLmltYWdlIHx8IHVuZGVmaW5lZFxuICAgICAgICAgIHJldHVybiB0b2tlblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFJldHVybiBleGlzdGluZyB0b2tlbiBmb3Igc3Vic2VxdWVudCByZXF1ZXN0c1xuICAgICAgY29uc29sZS5sb2coJ1JldHVybmluZyB0b2tlbiB3aXRoIHVzZXJJZDonLCB0b2tlbi51c2VySWQpXG4gICAgICByZXR1cm4gdG9rZW5cbiAgICB9LFxuICAgIHNlc3Npb246IGFzeW5jICh7IHNlc3Npb24sIHRva2VuIH0pID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdTZXNzaW9uIENhbGxiYWNrOicsIHsgXG4gICAgICAgIHRva2VuVXNlcklkOiB0b2tlbj8udXNlcklkLFxuICAgICAgICBzZXNzaW9uVXNlcjogc2Vzc2lvbj8udXNlclxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gT25seSBwb3B1bGF0ZSBzZXNzaW9uIGlmIHdlIGhhdmUgYSB2YWxpZCB1c2VySWQgaW4gdG9rZW5cbiAgICAgIGlmICh0b2tlbj8udXNlcklkKSB7XG4gICAgICAgIHNlc3Npb24udXNlciA9IHtcbiAgICAgICAgICBpZDogdG9rZW4udXNlcklkLFxuICAgICAgICAgIGVtYWlsOiB0b2tlbi5lbWFpbCB8fCAnJyxcbiAgICAgICAgICBuYW1lOiB0b2tlbi5uYW1lIHx8ICcnLFxuICAgICAgICAgIGltYWdlOiB0b2tlbi5waWN0dXJlIHx8ICcnLFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZygnU2Vzc2lvbiBjcmVhdGVkIHdpdGggdXNlcjonLCBzZXNzaW9uLnVzZXIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdObyB1c2VySWQgaW4gSldUIHRva2VuIC0gc2Vzc2lvbiBpbnZhbGlkJylcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHNlc3Npb25cbiAgICB9LFxuICAgIHJlZGlyZWN0OiBhc3luYyAoeyB1cmwsIGJhc2VVcmwgfSkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1JlZGlyZWN0IENhbGxiYWNrIC0gUHJvY2Vzc2luZzonLCB7IHVybCwgYmFzZVVybCB9KVxuICAgICAgXG4gICAgICAvLyBIYW5kbGUgZXJyb3IgcmVkaXJlY3RzXG4gICAgICBpZiAodXJsLmluY2x1ZGVzKCcvYXBpL2F1dGgvZXJyb3InKSB8fCB1cmwuaW5jbHVkZXMoJ2Vycm9yPScpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBdXRoIGVycm9yIGRldGVjdGVkLCByZWRpcmVjdGluZyB0byBsb2dpbicpXG4gICAgICAgIHJldHVybiBgJHtiYXNlVXJsfS9sb2dpbmBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSWYgaXQncyBhIHJlbGF0aXZlIFVSTCB0aGF0IHN0YXJ0cyB3aXRoIC8sIHByZXBlbmQgYmFzZVVybFxuICAgICAgaWYgKHVybC5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgICAgcmV0dXJuIGAke2Jhc2VVcmx9JHt1cmx9YFxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBJZiBpdCdzIGFscmVhZHkgYSBmdWxsIFVSTCBhbmQgc2FtZSBvcmlnaW4sIGFsbG93IGl0XG4gICAgICBpZiAodXJsLnN0YXJ0c1dpdGgoYmFzZVVybCkpIHtcbiAgICAgICAgcmV0dXJuIHVybFxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBEZWZhdWx0IGZhbGxiYWNrXG4gICAgICByZXR1cm4gYCR7YmFzZVVybH0vZGFzaGJvYXJkYFxuICAgIH0sXG4gIH0sXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiAnL2xvZ2luJyxcbiAgICBlcnJvcjogJy9sb2dpbicsXG4gIH0sXG59Il0sIm5hbWVzIjpbIkdvb2dsZVByb3ZpZGVyIiwiQ3JlZGVudGlhbHNQcm92aWRlciIsInByaXNtYSIsImNvbXBhcmVQYXNzd29yZCIsImF1dGhPcHRpb25zIiwiZGVidWciLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJuYW1lIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsInBhc3N3b3JkIiwiYXV0aG9yaXplIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsInBhc3N3b3JkSGFzaCIsImlzUGFzc3dvcmRWYWxpZCIsImlkIiwiaW1hZ2UiLCJzZXNzaW9uIiwic3RyYXRlZ3kiLCJtYXhBZ2UiLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiIsImFjY291bnQiLCJjb25zb2xlIiwibG9nIiwiaGFzVXNlciIsImhhc0FjY291bnQiLCJwcm92aWRlciIsInVzZXJFbWFpbCIsInRva2VuVXNlcklkIiwidXNlcklkIiwiZGJVc2VyIiwiY3JlYXRlIiwiZGF0YSIsImVtYWlsVmVyaWZpZWQiLCJEYXRlIiwidXBkYXRlIiwidW5kZWZpbmVkIiwicGljdHVyZSIsImVycm9yIiwic2Vzc2lvblVzZXIiLCJyZWRpcmVjdCIsInVybCIsImJhc2VVcmwiLCJpbmNsdWRlcyIsInN0YXJ0c1dpdGgiLCJwYWdlcyIsInNpZ25JbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth-config.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   comparePassword: () => (/* binding */ comparePassword),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   validateEmail: () => (/* binding */ validateEmail),\n/* harmony export */   validatePassword: () => (/* binding */ validatePassword),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n// Generate a secure JWT secret if not provided\nconst JWT_SECRET = process.env.JWT_SECRET || (()=>{\n    if (false) {}\n    // Generate a random secret for development\n    return crypto__WEBPACK_IMPORTED_MODULE_2___default().randomBytes(64).toString('hex');\n})();\n// Password validation function\nfunction validatePassword(password) {\n    const errors = [];\n    if (password.length < 8) {\n        errors.push('Password must be at least 8 characters long');\n    }\n    if (password.length > 128) {\n        errors.push('Password must be less than 128 characters long');\n    }\n    if (!/[a-z]/.test(password)) {\n        errors.push('Password must contain at least one lowercase letter');\n    }\n    if (!/[A-Z]/.test(password)) {\n        errors.push('Password must contain at least one uppercase letter');\n    }\n    if (!/[0-9]/.test(password)) {\n        errors.push('Password must contain at least one number');\n    }\n    if (!/[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/.test(password)) {\n        errors.push('Password must contain at least one special character');\n    }\n    // Check for common patterns\n    if (/(.)\\1{2,}/.test(password)) {\n        errors.push('Password cannot contain three or more repeating characters');\n    }\n    return {\n        isValid: errors.length === 0,\n        errors\n    };\n}\n// Email validation function\nfunction validateEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email) && email.length <= 254;\n}\nfunction generateToken(user) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n        userId: user.id,\n        email: user.email\n    }, JWT_SECRET, {\n        expiresIn: '7d'\n    });\n}\nfunction verifyToken(token) {\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n        return {\n            id: decoded.userId,\n            email: decoded.email\n        };\n    } catch (error) {\n        return null;\n    }\n}\nasync function hashPassword(password) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(password, 12);\n}\nasync function comparePassword(password, hashedPassword) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(password, hashedPassword);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQThCO0FBQ0Q7QUFDRjtBQUczQiwrQ0FBK0M7QUFDL0MsTUFBTUcsYUFBYUMsUUFBUUMsR0FBRyxDQUFDRixVQUFVLElBQUksQ0FBQztJQUM1QyxJQUFJQyxLQUFxQyxFQUFFLEVBRTFDO0lBQ0QsMkNBQTJDO0lBQzNDLE9BQU9GLHlEQUFrQixDQUFDLElBQUlNLFFBQVEsQ0FBQztBQUN6QztBQUVBLCtCQUErQjtBQUN4QixTQUFTQyxpQkFBaUJDLFFBQWdCO0lBQy9DLE1BQU1DLFNBQW1CLEVBQUU7SUFFM0IsSUFBSUQsU0FBU0UsTUFBTSxHQUFHLEdBQUc7UUFDdkJELE9BQU9FLElBQUksQ0FBQztJQUNkO0lBRUEsSUFBSUgsU0FBU0UsTUFBTSxHQUFHLEtBQUs7UUFDekJELE9BQU9FLElBQUksQ0FBQztJQUNkO0lBRUEsSUFBSSxDQUFDLFFBQVFDLElBQUksQ0FBQ0osV0FBVztRQUMzQkMsT0FBT0UsSUFBSSxDQUFDO0lBQ2Q7SUFFQSxJQUFJLENBQUMsUUFBUUMsSUFBSSxDQUFDSixXQUFXO1FBQzNCQyxPQUFPRSxJQUFJLENBQUM7SUFDZDtJQUVBLElBQUksQ0FBQyxRQUFRQyxJQUFJLENBQUNKLFdBQVc7UUFDM0JDLE9BQU9FLElBQUksQ0FBQztJQUNkO0lBRUEsSUFBSSxDQUFDLHdDQUF3Q0MsSUFBSSxDQUFDSixXQUFXO1FBQzNEQyxPQUFPRSxJQUFJLENBQUM7SUFDZDtJQUVBLDRCQUE0QjtJQUM1QixJQUFJLFlBQVlDLElBQUksQ0FBQ0osV0FBVztRQUM5QkMsT0FBT0UsSUFBSSxDQUFDO0lBQ2Q7SUFFQSxPQUFPO1FBQ0xFLFNBQVNKLE9BQU9DLE1BQU0sS0FBSztRQUMzQkQ7SUFDRjtBQUNGO0FBRUEsNEJBQTRCO0FBQ3JCLFNBQVNLLGNBQWNDLEtBQWE7SUFDekMsTUFBTUMsYUFBYTtJQUNuQixPQUFPQSxXQUFXSixJQUFJLENBQUNHLFVBQVVBLE1BQU1MLE1BQU0sSUFBSTtBQUNuRDtBQUVPLFNBQVNPLGNBQWNDLElBQWM7SUFDMUMsT0FBT3BCLHdEQUFRLENBQ2I7UUFBRXNCLFFBQVFGLEtBQUtHLEVBQUU7UUFBRU4sT0FBT0csS0FBS0gsS0FBSztJQUFDLEdBQ3JDZCxZQUNBO1FBQUVxQixXQUFXO0lBQUs7QUFFdEI7QUFFTyxTQUFTQyxZQUFZQyxLQUFhO0lBQ3ZDLElBQUk7UUFDRixNQUFNQyxVQUFVM0IsMERBQVUsQ0FBQzBCLE9BQU92QjtRQUNsQyxPQUFPO1lBQ0xvQixJQUFJSSxRQUFRTCxNQUFNO1lBQ2xCTCxPQUFPVSxRQUFRVixLQUFLO1FBQ3RCO0lBQ0YsRUFBRSxPQUFPWSxPQUFPO1FBQ2QsT0FBTztJQUNUO0FBQ0Y7QUFFTyxlQUFlQyxhQUFhcEIsUUFBZ0I7SUFDakQsT0FBT1Qsb0RBQVcsQ0FBQ1MsVUFBVTtBQUMvQjtBQUVPLGVBQWVzQixnQkFBZ0J0QixRQUFnQixFQUFFdUIsY0FBc0I7SUFDNUUsT0FBT2hDLHVEQUFjLENBQUNTLFVBQVV1QjtBQUNsQyIsInNvdXJjZXMiOlsiL1VzZXJzL3NoaXFpL0RvY3VtZW50cy9zaGlxaS9raWRwYXJ0eS9zcmMvbGliL2F1dGgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJ1xuaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nXG5pbXBvcnQgeyBBdXRoVXNlciB9IGZyb20gJ0AvdHlwZXMnXG5cbi8vIEdlbmVyYXRlIGEgc2VjdXJlIEpXVCBzZWNyZXQgaWYgbm90IHByb3ZpZGVkXG5jb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAoKCkgPT4ge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICAgIHRocm93IG5ldyBFcnJvcignSldUX1NFQ1JFVCBtdXN0IGJlIHNldCBpbiBwcm9kdWN0aW9uIGVudmlyb25tZW50JylcbiAgfVxuICAvLyBHZW5lcmF0ZSBhIHJhbmRvbSBzZWNyZXQgZm9yIGRldmVsb3BtZW50XG4gIHJldHVybiBjcnlwdG8ucmFuZG9tQnl0ZXMoNjQpLnRvU3RyaW5nKCdoZXgnKVxufSkoKVxuXG4vLyBQYXNzd29yZCB2YWxpZGF0aW9uIGZ1bmN0aW9uXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQYXNzd29yZChwYXNzd29yZDogc3RyaW5nKTogeyBpc1ZhbGlkOiBib29sZWFuOyBlcnJvcnM6IHN0cmluZ1tdIH0ge1xuICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW11cbiAgXG4gIGlmIChwYXNzd29yZC5sZW5ndGggPCA4KSB7XG4gICAgZXJyb3JzLnB1c2goJ1Bhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzIGxvbmcnKVxuICB9XG4gIFxuICBpZiAocGFzc3dvcmQubGVuZ3RoID4gMTI4KSB7XG4gICAgZXJyb3JzLnB1c2goJ1Bhc3N3b3JkIG11c3QgYmUgbGVzcyB0aGFuIDEyOCBjaGFyYWN0ZXJzIGxvbmcnKVxuICB9XG4gIFxuICBpZiAoIS9bYS16XS8udGVzdChwYXNzd29yZCkpIHtcbiAgICBlcnJvcnMucHVzaCgnUGFzc3dvcmQgbXVzdCBjb250YWluIGF0IGxlYXN0IG9uZSBsb3dlcmNhc2UgbGV0dGVyJylcbiAgfVxuICBcbiAgaWYgKCEvW0EtWl0vLnRlc3QocGFzc3dvcmQpKSB7XG4gICAgZXJyb3JzLnB1c2goJ1Bhc3N3b3JkIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgdXBwZXJjYXNlIGxldHRlcicpXG4gIH1cbiAgXG4gIGlmICghL1swLTldLy50ZXN0KHBhc3N3b3JkKSkge1xuICAgIGVycm9ycy5wdXNoKCdQYXNzd29yZCBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIG51bWJlcicpXG4gIH1cbiAgXG4gIGlmICghL1shQCMkJV4mKigpXytcXC09XFxbXFxde307JzpcIlxcXFx8LC48PlxcLz9dLy50ZXN0KHBhc3N3b3JkKSkge1xuICAgIGVycm9ycy5wdXNoKCdQYXNzd29yZCBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIHNwZWNpYWwgY2hhcmFjdGVyJylcbiAgfVxuICBcbiAgLy8gQ2hlY2sgZm9yIGNvbW1vbiBwYXR0ZXJuc1xuICBpZiAoLyguKVxcMXsyLH0vLnRlc3QocGFzc3dvcmQpKSB7XG4gICAgZXJyb3JzLnB1c2goJ1Bhc3N3b3JkIGNhbm5vdCBjb250YWluIHRocmVlIG9yIG1vcmUgcmVwZWF0aW5nIGNoYXJhY3RlcnMnKVxuICB9XG4gIFxuICByZXR1cm4ge1xuICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgZXJyb3JzXG4gIH1cbn1cblxuLy8gRW1haWwgdmFsaWRhdGlvbiBmdW5jdGlvblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRW1haWwoZW1haWw6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBlbWFpbFJlZ2V4ID0gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC9cbiAgcmV0dXJuIGVtYWlsUmVnZXgudGVzdChlbWFpbCkgJiYgZW1haWwubGVuZ3RoIDw9IDI1NFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVUb2tlbih1c2VyOiBBdXRoVXNlcik6IHN0cmluZyB7XG4gIHJldHVybiBqd3Quc2lnbihcbiAgICB7IHVzZXJJZDogdXNlci5pZCwgZW1haWw6IHVzZXIuZW1haWwgfSxcbiAgICBKV1RfU0VDUkVULFxuICAgIHsgZXhwaXJlc0luOiAnN2QnIH1cbiAgKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmVyaWZ5VG9rZW4odG9rZW46IHN0cmluZyk6IEF1dGhVc2VyIHwgbnVsbCB7XG4gIHRyeSB7XG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIEpXVF9TRUNSRVQpIGFzIGFueVxuICAgIHJldHVybiB7XG4gICAgICBpZDogZGVjb2RlZC51c2VySWQsXG4gICAgICBlbWFpbDogZGVjb2RlZC5lbWFpbFxuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHJldHVybiBiY3J5cHQuaGFzaChwYXNzd29yZCwgMTIpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21wYXJlUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZywgaGFzaGVkUGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICByZXR1cm4gYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKVxufSJdLCJuYW1lcyI6WyJqd3QiLCJiY3J5cHQiLCJjcnlwdG8iLCJKV1RfU0VDUkVUIiwicHJvY2VzcyIsImVudiIsIkVycm9yIiwicmFuZG9tQnl0ZXMiLCJ0b1N0cmluZyIsInZhbGlkYXRlUGFzc3dvcmQiLCJwYXNzd29yZCIsImVycm9ycyIsImxlbmd0aCIsInB1c2giLCJ0ZXN0IiwiaXNWYWxpZCIsInZhbGlkYXRlRW1haWwiLCJlbWFpbCIsImVtYWlsUmVnZXgiLCJnZW5lcmF0ZVRva2VuIiwidXNlciIsInNpZ24iLCJ1c2VySWQiLCJpZCIsImV4cGlyZXNJbiIsInZlcmlmeVRva2VuIiwidG9rZW4iLCJkZWNvZGVkIiwidmVyaWZ5IiwiZXJyb3IiLCJoYXNoUGFzc3dvcmQiLCJoYXNoIiwiY29tcGFyZVBhc3N3b3JkIiwiaGFzaGVkUGFzc3dvcmQiLCJjb21wYXJlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/email.ts":
/*!**************************!*\
  !*** ./src/lib/email.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateHostRSVPNotificationEmail: () => (/* binding */ generateHostRSVPNotificationEmail),\n/* harmony export */   generatePartyUpdateEmail: () => (/* binding */ generatePartyUpdateEmail),\n/* harmony export */   generateRSVPConfirmationEmail: () => (/* binding */ generateRSVPConfirmationEmail),\n/* harmony export */   generateReminderEmail: () => (/* binding */ generateReminderEmail),\n/* harmony export */   sendEmail: () => (/* binding */ sendEmail),\n/* harmony export */   sendPartyUpdateEmail: () => (/* binding */ sendPartyUpdateEmail)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"(rsc)/./node_modules/nodemailer/lib/nodemailer.js\");\n\n// Create reusable transporter\nconst createTransporter = ()=>{\n    // Check if we have Gmail SMTP configuration\n    if (process.env.SMTP_HOST === 'smtp.gmail.com' && process.env.SMTP_USER && process.env.SMTP_PASS) {\n        return nodemailer__WEBPACK_IMPORTED_MODULE_0__.createTransporter({\n            host: 'smtp.gmail.com',\n            port: 587,\n            secure: false,\n            auth: {\n                user: process.env.SMTP_USER,\n                pass: process.env.SMTP_PASS\n            }\n        });\n    }\n    // Check if we have custom SMTP configuration\n    if (process.env.SMTP_HOST && process.env.SMTP_PORT) {\n        return nodemailer__WEBPACK_IMPORTED_MODULE_0__.createTransporter({\n            host: process.env.SMTP_HOST,\n            port: parseInt(process.env.SMTP_PORT),\n            secure: process.env.SMTP_PORT === '465',\n            auth: process.env.SMTP_USER && process.env.SMTP_PASS ? {\n                user: process.env.SMTP_USER,\n                pass: process.env.SMTP_PASS\n            } : undefined,\n            // For development with mailhog or similar\n            ignoreTLS: process.env.SMTP_HOST === 'localhost'\n        });\n    }\n    // Fallback - just log to console\n    return null;\n};\nasync function sendEmail(emailData) {\n    const transporter = createTransporter();\n    if (!transporter) {\n        // Fallback to console logging for development\n        console.log('\\n=== EMAIL NOTIFICATION (No SMTP configured) ===');\n        console.log(`To: ${emailData.to}`);\n        console.log(`Subject: ${emailData.subject}`);\n        console.log('Content:');\n        console.log(emailData.text);\n        console.log('============================================\\n');\n        return Promise.resolve();\n    }\n    try {\n        const mailOptions = {\n            from: process.env.SMTP_FROM || 'noreply@kidparty.app',\n            to: emailData.to,\n            subject: emailData.subject,\n            text: emailData.text,\n            html: emailData.html || emailData.text.replace(/\\n/g, '<br>')\n        };\n        console.log(` Sending email to ${emailData.to}: ${emailData.subject}`);\n        const result = await transporter.sendMail(mailOptions);\n        console.log(` Email sent successfully: ${result.messageId}`);\n        return result;\n    } catch (error) {\n        console.error(' Failed to send email:', error);\n        // Fallback to console logging if email fails\n        console.log('\\n=== EMAIL NOTIFICATION (Fallback) ===');\n        console.log(`To: ${emailData.to}`);\n        console.log(`Subject: ${emailData.subject}`);\n        console.log('Content:');\n        console.log(emailData.text);\n        console.log('=====================================\\n');\n        // Don't throw error - just log and continue\n        return Promise.resolve();\n    }\n}\nfunction generateRSVPConfirmationEmail(partyData, guestData) {\n    const formatDate = (date)=>{\n        return new Intl.DateTimeFormat('en-US', {\n            weekday: 'long',\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric',\n            hour: 'numeric',\n            minute: '2-digit'\n        }).format(date);\n    };\n    const statusEmoji = {\n        'YES': '',\n        'NO': '',\n        'MAYBE': ''\n    };\n    const statusText = {\n        'YES': 'Yes, we\\'ll be there!',\n        'NO': 'Sorry, we can\\'t make it',\n        'MAYBE': 'Maybe, we\\'ll try to make it'\n    };\n    const subject = `RSVP Confirmed: ${partyData.childName}'s Birthday Party`;\n    const guestConfirmText = guestData.status === 'YES' ? `Great! We're excited to celebrate with ${guestData.childName} and ${guestData.numChildren} child${guestData.numChildren !== 1 ? 'ren' : ''}.\n${guestData.parentStaying ? 'A parent/guardian will be staying for the party.' : 'This will be a drop-off party for us.'}` : guestData.status === 'MAYBE' ? `Thank you for letting us know you might be able to make it. We hope to see ${guestData.childName} there!` : `Thank you for letting us know. We'll miss ${guestData.childName} but hope to celebrate together next time!`;\n    const text = `Hi ${guestData.parentName},\n\nThank you for your RSVP to ${partyData.childName}'s ${partyData.childAge}th birthday party!\n\nYour Response: ${statusEmoji[guestData.status]} ${statusText[guestData.status]}\n\n${guestConfirmText}\n\nParty Details:\n ${partyData.childName}'s ${partyData.childAge}th Birthday${partyData.theme ? ` (${partyData.theme} theme)` : ''}\n ${formatDate(partyData.eventDatetime)}\n ${partyData.location}\n\n${partyData.notes ? `Special Notes: ${partyData.notes}\\n\\n` : ''}${guestData.allergies ? ` Allergies/Dietary Restrictions: ${guestData.allergies}\\n\\n` : ''}${guestData.message ? ` Your Message: \"${guestData.message}\"\\n\\n` : ''}Looking forward to celebrating together!\n\nBest regards,\nKid Party RSVP Team`;\n    return {\n        subject,\n        text\n    };\n}\nfunction generateHostRSVPNotificationEmail(partyData, guestData) {\n    const formatDate = (date)=>{\n        return new Intl.DateTimeFormat('en-US', {\n            weekday: 'long',\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric',\n            hour: 'numeric',\n            minute: '2-digit'\n        }).format(date);\n    };\n    const statusEmoji = {\n        'YES': '',\n        'NO': '',\n        'MAYBE': ''\n    };\n    const subject = `New RSVP: ${guestData.childName} ${guestData.status === 'YES' ? 'is coming' : guestData.status === 'MAYBE' ? 'might come' : 'can\\'t make it'} to ${partyData.childName}'s party`;\n    const text = `Hi there!\n\nYou have a new RSVP for ${partyData.childName}'s ${partyData.childAge}th birthday party:\n\nGuest: ${guestData.parentName} & ${guestData.childName}\nResponse: ${statusEmoji[guestData.status]} ${guestData.status}\n\n${guestData.status === 'YES' ? `\nParty Details:\n ${guestData.numChildren} child${guestData.numChildren !== 1 ? 'ren' : ''} attending\n Parent ${guestData.parentStaying ? 'will be staying' : 'will drop off'}\n${guestData.allergies ? `  Allergies: ${guestData.allergies}` : ''}\n` : ''}${guestData.message ? `\nMessage from ${guestData.parentName}: \"${guestData.message}\"\n` : ''}\nParty: ${partyData.childName}'s ${partyData.childAge}th Birthday\nDate: ${formatDate(partyData.eventDatetime)}\nLocation: ${partyData.location}\n\nYou can view all RSVPs in your dashboard.\n\nBest regards,\nKid Party RSVP Team`;\n    return {\n        subject,\n        text\n    };\n}\nfunction generateReminderEmail(partyData, guestData, reminderType) {\n    const formatDate = (date)=>{\n        return new Intl.DateTimeFormat('en-US', {\n            weekday: 'long',\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric',\n            hour: 'numeric',\n            minute: '2-digit'\n        }).format(date);\n    };\n    const timeMap = {\n        SEVEN_DAYS: '7 days',\n        TWO_DAYS: '2 days',\n        SAME_DAY: 'today'\n    };\n    const subject = reminderType === 'SAME_DAY' ? `Today: ${partyData.childName}'s Birthday Party!` : `Reminder: ${partyData.childName}'s Party in ${timeMap[reminderType]}`;\n    const text = `Hi ${guestData.parentName},\n\nThis is a friendly reminder about ${partyData.childName}'s ${partyData.childAge}th birthday party!\n\nParty Details:\n ${partyData.childName}'s ${partyData.childAge}th Birthday${partyData.theme ? ` (${partyData.theme} theme)` : ''}\n ${formatDate(partyData.eventDatetime)}\n ${partyData.location}\n\n${partyData.notes ? `Special Notes: ${partyData.notes}\\n\\n` : ''}Haven't RSVP'd yet? Please let us know: ${partyData.rsvpUrl}\n\nLooking forward to celebrating with ${guestData.childName}!\n\nBest regards,\nKid Party RSVP Team`;\n    return {\n        subject,\n        text\n    };\n}\nfunction generatePartyUpdateEmail(partyData, guestData, changes) {\n    const formatDate = (date)=>{\n        return new Intl.DateTimeFormat('en-US', {\n            weekday: 'long',\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric',\n            hour: 'numeric',\n            minute: '2-digit'\n        }).format(date);\n    };\n    const subject = `Party Update: ${partyData.childName}'s Birthday Party`;\n    const changesList = [];\n    if (changes.date) changesList.push(' Date and time');\n    if (changes.location) changesList.push(' Location');\n    if (changes.childName) changesList.push(' Child\\'s name');\n    if (changes.childAge) changesList.push(' Age');\n    const text = `Hi ${guestData.parentName},\n\nWe have some important updates for ${partyData.childName}'s ${partyData.childAge}th birthday party!\n\nWhat's Changed:\n${changesList.map((change)=>` ${change}`).join('\\n')}\n\nUpdated Party Details:\n ${partyData.childName}'s ${partyData.childAge}th Birthday${partyData.theme ? ` (${partyData.theme} theme)` : ''}\n ${formatDate(partyData.eventDatetime)}\n ${partyData.location}\n\n${partyData.notes ? `Special Notes: ${partyData.notes}\\n\\n` : ''}Please note these changes and let us know if they affect your ability to attend.\nYour current RSVP is still valid, but you can update it if needed: ${\"http://192.168.4.168:3000\"}/rsvp/${partyData.publicRsvpToken}\n\nWe apologize for any inconvenience and look forward to celebrating with ${guestData.childName}!\n\nBest regards,\nKid Party RSVP Team`;\n    return {\n        subject,\n        text\n    };\n}\nasync function sendPartyUpdateEmail(email, parentName, partyData, changes) {\n    const emailContent = generatePartyUpdateEmail(partyData, {\n        parentName,\n        childName: 'your child'\n    }, changes);\n    await sendEmail({\n        to: email,\n        subject: emailContent.subject,\n        text: emailContent.text\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDLElBQUksQ0FBQyxHQUFHLEdBQUc7bUVBQ0UsRUFBRTVELDJCQUFnQyxDQUFDLE1BQU0sRUFBRW1DLFVBQVU0QyxlQUFlLENBQUM7O3dFQUVoRSxFQUFFM0MsVUFBVWMsU0FBUyxDQUFDOzs7bUJBRzNFLENBQUM7SUFFbEIsT0FBTztRQUNMN0I7UUFDQUM7SUFDRjtBQUNGO0FBRU8sZUFBZTBELHFCQUNwQkMsS0FBYSxFQUNiMUIsVUFBa0IsRUFDbEJwQixTQUFjLEVBQ2RxQyxPQUFZO0lBRVosTUFBTVUsZUFBZVgseUJBQ25CcEMsV0FDQTtRQUFFb0I7UUFBWUwsV0FBVztJQUFhLEdBQ3RDc0I7SUFHRixNQUFNekQsVUFBVTtRQUNkSyxJQUFJNkQ7UUFDSjVELFNBQVM2RCxhQUFhN0QsT0FBTztRQUM3QkMsTUFBTTRELGFBQWE1RCxJQUFJO0lBQ3pCO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zaGlxaS9Eb2N1bWVudHMvc2hpcWkva2lkcGFydHkvc3JjL2xpYi9lbWFpbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbm9kZW1haWxlciBmcm9tICdub2RlbWFpbGVyJ1xuXG5pbnRlcmZhY2UgRW1haWxEYXRhIHtcbiAgdG86IHN0cmluZ1xuICBzdWJqZWN0OiBzdHJpbmdcbiAgdGV4dDogc3RyaW5nXG4gIGh0bWw/OiBzdHJpbmdcbn1cblxuLy8gQ3JlYXRlIHJldXNhYmxlIHRyYW5zcG9ydGVyXG5jb25zdCBjcmVhdGVUcmFuc3BvcnRlciA9ICgpID0+IHtcbiAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBHbWFpbCBTTVRQIGNvbmZpZ3VyYXRpb25cbiAgaWYgKHByb2Nlc3MuZW52LlNNVFBfSE9TVCA9PT0gJ3NtdHAuZ21haWwuY29tJyAmJiBwcm9jZXNzLmVudi5TTVRQX1VTRVIgJiYgcHJvY2Vzcy5lbnYuU01UUF9QQVNTKSB7XG4gICAgcmV0dXJuIG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0ZXIoe1xuICAgICAgaG9zdDogJ3NtdHAuZ21haWwuY29tJyxcbiAgICAgIHBvcnQ6IDU4NyxcbiAgICAgIHNlY3VyZTogZmFsc2UsIC8vIHRydWUgZm9yIDQ2NSwgZmFsc2UgZm9yIG90aGVyIHBvcnRzXG4gICAgICBhdXRoOiB7XG4gICAgICAgIHVzZXI6IHByb2Nlc3MuZW52LlNNVFBfVVNFUixcbiAgICAgICAgcGFzczogcHJvY2Vzcy5lbnYuU01UUF9QQVNTLFxuICAgICAgfSxcbiAgICB9KVxuICB9XG4gIFxuICAvLyBDaGVjayBpZiB3ZSBoYXZlIGN1c3RvbSBTTVRQIGNvbmZpZ3VyYXRpb25cbiAgaWYgKHByb2Nlc3MuZW52LlNNVFBfSE9TVCAmJiBwcm9jZXNzLmVudi5TTVRQX1BPUlQpIHtcbiAgICByZXR1cm4gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnRlcih7XG4gICAgICBob3N0OiBwcm9jZXNzLmVudi5TTVRQX0hPU1QsXG4gICAgICBwb3J0OiBwYXJzZUludChwcm9jZXNzLmVudi5TTVRQX1BPUlQpLFxuICAgICAgc2VjdXJlOiBwcm9jZXNzLmVudi5TTVRQX1BPUlQgPT09ICc0NjUnLFxuICAgICAgYXV0aDogcHJvY2Vzcy5lbnYuU01UUF9VU0VSICYmIHByb2Nlc3MuZW52LlNNVFBfUEFTUyA/IHtcbiAgICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuU01UUF9VU0VSLFxuICAgICAgICBwYXNzOiBwcm9jZXNzLmVudi5TTVRQX1BBU1MsXG4gICAgICB9IDogdW5kZWZpbmVkLFxuICAgICAgLy8gRm9yIGRldmVsb3BtZW50IHdpdGggbWFpbGhvZyBvciBzaW1pbGFyXG4gICAgICBpZ25vcmVUTFM6IHByb2Nlc3MuZW52LlNNVFBfSE9TVCA9PT0gJ2xvY2FsaG9zdCcsXG4gICAgfSlcbiAgfVxuICBcbiAgLy8gRmFsbGJhY2sgLSBqdXN0IGxvZyB0byBjb25zb2xlXG4gIHJldHVybiBudWxsXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kRW1haWwoZW1haWxEYXRhOiBFbWFpbERhdGEpIHtcbiAgY29uc3QgdHJhbnNwb3J0ZXIgPSBjcmVhdGVUcmFuc3BvcnRlcigpXG4gIFxuICBpZiAoIXRyYW5zcG9ydGVyKSB7XG4gICAgLy8gRmFsbGJhY2sgdG8gY29uc29sZSBsb2dnaW5nIGZvciBkZXZlbG9wbWVudFxuICAgIGNvbnNvbGUubG9nKCdcXG49PT0gRU1BSUwgTk9USUZJQ0FUSU9OIChObyBTTVRQIGNvbmZpZ3VyZWQpID09PScpXG4gICAgY29uc29sZS5sb2coYFRvOiAke2VtYWlsRGF0YS50b31gKVxuICAgIGNvbnNvbGUubG9nKGBTdWJqZWN0OiAke2VtYWlsRGF0YS5zdWJqZWN0fWApXG4gICAgY29uc29sZS5sb2coJ0NvbnRlbnQ6JylcbiAgICBjb25zb2xlLmxvZyhlbWFpbERhdGEudGV4dClcbiAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXG4nKVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICB9XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xuICAgICAgZnJvbTogcHJvY2Vzcy5lbnYuU01UUF9GUk9NIHx8ICdub3JlcGx5QGtpZHBhcnR5LmFwcCcsXG4gICAgICB0bzogZW1haWxEYXRhLnRvLFxuICAgICAgc3ViamVjdDogZW1haWxEYXRhLnN1YmplY3QsXG4gICAgICB0ZXh0OiBlbWFpbERhdGEudGV4dCxcbiAgICAgIGh0bWw6IGVtYWlsRGF0YS5odG1sIHx8IGVtYWlsRGF0YS50ZXh0LnJlcGxhY2UoL1xcbi9nLCAnPGJyPicpLFxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhg8J+TpyBTZW5kaW5nIGVtYWlsIHRvICR7ZW1haWxEYXRhLnRvfTogJHtlbWFpbERhdGEuc3ViamVjdH1gKVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zKVxuICAgIGNvbnNvbGUubG9nKGDinIUgRW1haWwgc2VudCBzdWNjZXNzZnVsbHk6ICR7cmVzdWx0Lm1lc3NhZ2VJZH1gKVxuICAgIHJldHVybiByZXN1bHRcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIHNlbmQgZW1haWw6JywgZXJyb3IpXG4gICAgXG4gICAgLy8gRmFsbGJhY2sgdG8gY29uc29sZSBsb2dnaW5nIGlmIGVtYWlsIGZhaWxzXG4gICAgY29uc29sZS5sb2coJ1xcbj09PSBFTUFJTCBOT1RJRklDQVRJT04gKEZhbGxiYWNrKSA9PT0nKVxuICAgIGNvbnNvbGUubG9nKGBUbzogJHtlbWFpbERhdGEudG99YClcbiAgICBjb25zb2xlLmxvZyhgU3ViamVjdDogJHtlbWFpbERhdGEuc3ViamVjdH1gKVxuICAgIGNvbnNvbGUubG9nKCdDb250ZW50OicpXG4gICAgY29uc29sZS5sb2coZW1haWxEYXRhLnRleHQpXG4gICAgY29uc29sZS5sb2coJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXG4nKVxuICAgIFxuICAgIC8vIERvbid0IHRocm93IGVycm9yIC0ganVzdCBsb2cgYW5kIGNvbnRpbnVlXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlUlNWUENvbmZpcm1hdGlvbkVtYWlsKFxuICBwYXJ0eURhdGE6IHtcbiAgICBjaGlsZE5hbWU6IHN0cmluZ1xuICAgIGNoaWxkQWdlOiBudW1iZXJcbiAgICBldmVudERhdGV0aW1lOiBEYXRlXG4gICAgbG9jYXRpb246IHN0cmluZ1xuICAgIHRoZW1lPzogc3RyaW5nXG4gICAgbm90ZXM/OiBzdHJpbmdcbiAgfSxcbiAgZ3Vlc3REYXRhOiB7XG4gICAgcGFyZW50TmFtZTogc3RyaW5nXG4gICAgY2hpbGROYW1lOiBzdHJpbmdcbiAgICBzdGF0dXM6IHN0cmluZ1xuICAgIG51bUNoaWxkcmVuOiBudW1iZXJcbiAgICBwYXJlbnRTdGF5aW5nOiBib29sZWFuXG4gICAgYWxsZXJnaWVzPzogc3RyaW5nXG4gICAgbWVzc2FnZT86IHN0cmluZ1xuICB9XG4pIHtcbiAgY29uc3QgZm9ybWF0RGF0ZSA9IChkYXRlOiBEYXRlKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdlbi1VUycsIHtcbiAgICAgIHdlZWtkYXk6ICdsb25nJyxcbiAgICAgIHllYXI6ICdudW1lcmljJyxcbiAgICAgIG1vbnRoOiAnbG9uZycsXG4gICAgICBkYXk6ICdudW1lcmljJyxcbiAgICAgIGhvdXI6ICdudW1lcmljJyxcbiAgICAgIG1pbnV0ZTogJzItZGlnaXQnLFxuICAgIH0pLmZvcm1hdChkYXRlKVxuICB9XG5cbiAgY29uc3Qgc3RhdHVzRW1vamkgPSB7XG4gICAgJ1lFUyc6ICfwn46JJyxcbiAgICAnTk8nOiAn8J+YoicsXG4gICAgJ01BWUJFJzogJ/CfpJQnXG4gIH1cblxuICBjb25zdCBzdGF0dXNUZXh0ID0ge1xuICAgICdZRVMnOiAnWWVzLCB3ZVxcJ2xsIGJlIHRoZXJlIScsXG4gICAgJ05PJzogJ1NvcnJ5LCB3ZSBjYW5cXCd0IG1ha2UgaXQnLFxuICAgICdNQVlCRSc6ICdNYXliZSwgd2VcXCdsbCB0cnkgdG8gbWFrZSBpdCdcbiAgfVxuXG4gIGNvbnN0IHN1YmplY3QgPSBgUlNWUCBDb25maXJtZWQ6ICR7cGFydHlEYXRhLmNoaWxkTmFtZX0ncyBCaXJ0aGRheSBQYXJ0eWBcblxuICBjb25zdCBndWVzdENvbmZpcm1UZXh0ID0gZ3Vlc3REYXRhLnN0YXR1cyA9PT0gJ1lFUycgXG4gICAgPyBgR3JlYXQhIFdlJ3JlIGV4Y2l0ZWQgdG8gY2VsZWJyYXRlIHdpdGggJHtndWVzdERhdGEuY2hpbGROYW1lfSBhbmQgJHtndWVzdERhdGEubnVtQ2hpbGRyZW59IGNoaWxkJHtndWVzdERhdGEubnVtQ2hpbGRyZW4gIT09IDEgPyAncmVuJyA6ICcnfS5cbiR7Z3Vlc3REYXRhLnBhcmVudFN0YXlpbmcgPyAnQSBwYXJlbnQvZ3VhcmRpYW4gd2lsbCBiZSBzdGF5aW5nIGZvciB0aGUgcGFydHkuJyA6ICdUaGlzIHdpbGwgYmUgYSBkcm9wLW9mZiBwYXJ0eSBmb3IgdXMuJ31gXG4gICAgOiBndWVzdERhdGEuc3RhdHVzID09PSAnTUFZQkUnXG4gICAgPyBgVGhhbmsgeW91IGZvciBsZXR0aW5nIHVzIGtub3cgeW91IG1pZ2h0IGJlIGFibGUgdG8gbWFrZSBpdC4gV2UgaG9wZSB0byBzZWUgJHtndWVzdERhdGEuY2hpbGROYW1lfSB0aGVyZSFgXG4gICAgOiBgVGhhbmsgeW91IGZvciBsZXR0aW5nIHVzIGtub3cuIFdlJ2xsIG1pc3MgJHtndWVzdERhdGEuY2hpbGROYW1lfSBidXQgaG9wZSB0byBjZWxlYnJhdGUgdG9nZXRoZXIgbmV4dCB0aW1lIWBcblxuICBjb25zdCB0ZXh0ID0gYEhpICR7Z3Vlc3REYXRhLnBhcmVudE5hbWV9LFxuXG5UaGFuayB5b3UgZm9yIHlvdXIgUlNWUCB0byAke3BhcnR5RGF0YS5jaGlsZE5hbWV9J3MgJHtwYXJ0eURhdGEuY2hpbGRBZ2V9dGggYmlydGhkYXkgcGFydHkhXG5cbllvdXIgUmVzcG9uc2U6ICR7c3RhdHVzRW1vamlbZ3Vlc3REYXRhLnN0YXR1cyBhcyBrZXlvZiB0eXBlb2Ygc3RhdHVzRW1vamldfSAke3N0YXR1c1RleHRbZ3Vlc3REYXRhLnN0YXR1cyBhcyBrZXlvZiB0eXBlb2Ygc3RhdHVzVGV4dF19XG5cbiR7Z3Vlc3RDb25maXJtVGV4dH1cblxuUGFydHkgRGV0YWlsczpcbvCfjoIgJHtwYXJ0eURhdGEuY2hpbGROYW1lfSdzICR7cGFydHlEYXRhLmNoaWxkQWdlfXRoIEJpcnRoZGF5JHtwYXJ0eURhdGEudGhlbWUgPyBgICgke3BhcnR5RGF0YS50aGVtZX0gdGhlbWUpYCA6ICcnfVxu8J+ThSAke2Zvcm1hdERhdGUocGFydHlEYXRhLmV2ZW50RGF0ZXRpbWUpfVxu8J+TjSAke3BhcnR5RGF0YS5sb2NhdGlvbn1cblxuJHtwYXJ0eURhdGEubm90ZXMgPyBgU3BlY2lhbCBOb3RlczogJHtwYXJ0eURhdGEubm90ZXN9XFxuXFxuYCA6ICcnfSR7Z3Vlc3REYXRhLmFsbGVyZ2llcyA/IGDimqDvuI8gQWxsZXJnaWVzL0RpZXRhcnkgUmVzdHJpY3Rpb25zOiAke2d1ZXN0RGF0YS5hbGxlcmdpZXN9XFxuXFxuYCA6ICcnfSR7Z3Vlc3REYXRhLm1lc3NhZ2UgPyBg8J+SrCBZb3VyIE1lc3NhZ2U6IFwiJHtndWVzdERhdGEubWVzc2FnZX1cIlxcblxcbmAgOiAnJ31Mb29raW5nIGZvcndhcmQgdG8gY2VsZWJyYXRpbmcgdG9nZXRoZXIhXG5cbkJlc3QgcmVnYXJkcyxcbktpZCBQYXJ0eSBSU1ZQIFRlYW1gXG5cbiAgcmV0dXJuIHtcbiAgICBzdWJqZWN0LFxuICAgIHRleHRcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVIb3N0UlNWUE5vdGlmaWNhdGlvbkVtYWlsKFxuICBwYXJ0eURhdGE6IHtcbiAgICBjaGlsZE5hbWU6IHN0cmluZ1xuICAgIGNoaWxkQWdlOiBudW1iZXJcbiAgICBldmVudERhdGV0aW1lOiBEYXRlXG4gICAgbG9jYXRpb246IHN0cmluZ1xuICB9LFxuICBndWVzdERhdGE6IHtcbiAgICBwYXJlbnROYW1lOiBzdHJpbmdcbiAgICBjaGlsZE5hbWU6IHN0cmluZ1xuICAgIHN0YXR1czogc3RyaW5nXG4gICAgbnVtQ2hpbGRyZW46IG51bWJlclxuICAgIHBhcmVudFN0YXlpbmc6IGJvb2xlYW5cbiAgICBhbGxlcmdpZXM/OiBzdHJpbmdcbiAgICBtZXNzYWdlPzogc3RyaW5nXG4gIH1cbikge1xuICBjb25zdCBmb3JtYXREYXRlID0gKGRhdGU6IERhdGUpID0+IHtcbiAgICByZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2VuLVVTJywge1xuICAgICAgd2Vla2RheTogJ2xvbmcnLFxuICAgICAgeWVhcjogJ251bWVyaWMnLFxuICAgICAgbW9udGg6ICdsb25nJyxcbiAgICAgIGRheTogJ251bWVyaWMnLFxuICAgICAgaG91cjogJ251bWVyaWMnLFxuICAgICAgbWludXRlOiAnMi1kaWdpdCcsXG4gICAgfSkuZm9ybWF0KGRhdGUpXG4gIH1cblxuICBjb25zdCBzdGF0dXNFbW9qaSA9IHtcbiAgICAnWUVTJzogJ/CfjoknLFxuICAgICdOTyc6ICfwn5iiJyxcbiAgICAnTUFZQkUnOiAn8J+klCdcbiAgfVxuXG4gIGNvbnN0IHN1YmplY3QgPSBgTmV3IFJTVlA6ICR7Z3Vlc3REYXRhLmNoaWxkTmFtZX0gJHtndWVzdERhdGEuc3RhdHVzID09PSAnWUVTJyA/ICdpcyBjb21pbmcnIDogZ3Vlc3REYXRhLnN0YXR1cyA9PT0gJ01BWUJFJyA/ICdtaWdodCBjb21lJyA6ICdjYW5cXCd0IG1ha2UgaXQnfSB0byAke3BhcnR5RGF0YS5jaGlsZE5hbWV9J3MgcGFydHlgXG5cbiAgY29uc3QgdGV4dCA9IGBIaSB0aGVyZSFcblxuWW91IGhhdmUgYSBuZXcgUlNWUCBmb3IgJHtwYXJ0eURhdGEuY2hpbGROYW1lfSdzICR7cGFydHlEYXRhLmNoaWxkQWdlfXRoIGJpcnRoZGF5IHBhcnR5OlxuXG5HdWVzdDogJHtndWVzdERhdGEucGFyZW50TmFtZX0gJiAke2d1ZXN0RGF0YS5jaGlsZE5hbWV9XG5SZXNwb25zZTogJHtzdGF0dXNFbW9qaVtndWVzdERhdGEuc3RhdHVzIGFzIGtleW9mIHR5cGVvZiBzdGF0dXNFbW9qaV19ICR7Z3Vlc3REYXRhLnN0YXR1c31cblxuJHtndWVzdERhdGEuc3RhdHVzID09PSAnWUVTJyA/IGBcblBhcnR5IERldGFpbHM6XG7igKIgJHtndWVzdERhdGEubnVtQ2hpbGRyZW59IGNoaWxkJHtndWVzdERhdGEubnVtQ2hpbGRyZW4gIT09IDEgPyAncmVuJyA6ICcnfSBhdHRlbmRpbmdcbuKAoiBQYXJlbnQgJHtndWVzdERhdGEucGFyZW50U3RheWluZyA/ICd3aWxsIGJlIHN0YXlpbmcnIDogJ3dpbGwgZHJvcCBvZmYnfVxuJHtndWVzdERhdGEuYWxsZXJnaWVzID8gYOKAoiDimqDvuI8gQWxsZXJnaWVzOiAke2d1ZXN0RGF0YS5hbGxlcmdpZXN9YCA6ICcnfVxuYCA6ICcnfSR7Z3Vlc3REYXRhLm1lc3NhZ2UgPyBgXG5NZXNzYWdlIGZyb20gJHtndWVzdERhdGEucGFyZW50TmFtZX06IFwiJHtndWVzdERhdGEubWVzc2FnZX1cIlxuYCA6ICcnfVxuUGFydHk6ICR7cGFydHlEYXRhLmNoaWxkTmFtZX0ncyAke3BhcnR5RGF0YS5jaGlsZEFnZX10aCBCaXJ0aGRheVxuRGF0ZTogJHtmb3JtYXREYXRlKHBhcnR5RGF0YS5ldmVudERhdGV0aW1lKX1cbkxvY2F0aW9uOiAke3BhcnR5RGF0YS5sb2NhdGlvbn1cblxuWW91IGNhbiB2aWV3IGFsbCBSU1ZQcyBpbiB5b3VyIGRhc2hib2FyZC5cblxuQmVzdCByZWdhcmRzLFxuS2lkIFBhcnR5IFJTVlAgVGVhbWBcblxuICByZXR1cm4ge1xuICAgIHN1YmplY3QsXG4gICAgdGV4dFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVJlbWluZGVyRW1haWwoXG4gIHBhcnR5RGF0YToge1xuICAgIGNoaWxkTmFtZTogc3RyaW5nXG4gICAgY2hpbGRBZ2U6IG51bWJlclxuICAgIGV2ZW50RGF0ZXRpbWU6IERhdGVcbiAgICBsb2NhdGlvbjogc3RyaW5nXG4gICAgdGhlbWU/OiBzdHJpbmdcbiAgICBub3Rlcz86IHN0cmluZ1xuICAgIHJzdnBVcmw6IHN0cmluZ1xuICB9LFxuICBndWVzdERhdGE6IHtcbiAgICBwYXJlbnROYW1lOiBzdHJpbmdcbiAgICBjaGlsZE5hbWU6IHN0cmluZ1xuICB9LFxuICByZW1pbmRlclR5cGU6ICdTRVZFTl9EQVlTJyB8ICdUV09fREFZUycgfCAnU0FNRV9EQVknXG4pIHtcbiAgY29uc3QgZm9ybWF0RGF0ZSA9IChkYXRlOiBEYXRlKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdlbi1VUycsIHtcbiAgICAgIHdlZWtkYXk6ICdsb25nJyxcbiAgICAgIHllYXI6ICdudW1lcmljJyxcbiAgICAgIG1vbnRoOiAnbG9uZycsXG4gICAgICBkYXk6ICdudW1lcmljJyxcbiAgICAgIGhvdXI6ICdudW1lcmljJyxcbiAgICAgIG1pbnV0ZTogJzItZGlnaXQnLFxuICAgIH0pLmZvcm1hdChkYXRlKVxuICB9XG5cbiAgY29uc3QgdGltZU1hcCA9IHtcbiAgICBTRVZFTl9EQVlTOiAnNyBkYXlzJyxcbiAgICBUV09fREFZUzogJzIgZGF5cycsIFxuICAgIFNBTUVfREFZOiAndG9kYXknXG4gIH1cblxuICBjb25zdCBzdWJqZWN0ID0gcmVtaW5kZXJUeXBlID09PSAnU0FNRV9EQVknIFxuICAgID8gYFRvZGF5OiAke3BhcnR5RGF0YS5jaGlsZE5hbWV9J3MgQmlydGhkYXkgUGFydHkhYFxuICAgIDogYFJlbWluZGVyOiAke3BhcnR5RGF0YS5jaGlsZE5hbWV9J3MgUGFydHkgaW4gJHt0aW1lTWFwW3JlbWluZGVyVHlwZV19YFxuXG4gIGNvbnN0IHRleHQgPSBgSGkgJHtndWVzdERhdGEucGFyZW50TmFtZX0sXG5cblRoaXMgaXMgYSBmcmllbmRseSByZW1pbmRlciBhYm91dCAke3BhcnR5RGF0YS5jaGlsZE5hbWV9J3MgJHtwYXJ0eURhdGEuY2hpbGRBZ2V9dGggYmlydGhkYXkgcGFydHkhXG5cblBhcnR5IERldGFpbHM6XG7wn46CICR7cGFydHlEYXRhLmNoaWxkTmFtZX0ncyAke3BhcnR5RGF0YS5jaGlsZEFnZX10aCBCaXJ0aGRheSR7cGFydHlEYXRhLnRoZW1lID8gYCAoJHtwYXJ0eURhdGEudGhlbWV9IHRoZW1lKWAgOiAnJ31cbvCfk4UgJHtmb3JtYXREYXRlKHBhcnR5RGF0YS5ldmVudERhdGV0aW1lKX1cbvCfk40gJHtwYXJ0eURhdGEubG9jYXRpb259XG5cbiR7cGFydHlEYXRhLm5vdGVzID8gYFNwZWNpYWwgTm90ZXM6ICR7cGFydHlEYXRhLm5vdGVzfVxcblxcbmAgOiAnJ31IYXZlbid0IFJTVlAnZCB5ZXQ/IFBsZWFzZSBsZXQgdXMga25vdzogJHtwYXJ0eURhdGEucnN2cFVybH1cblxuTG9va2luZyBmb3J3YXJkIHRvIGNlbGVicmF0aW5nIHdpdGggJHtndWVzdERhdGEuY2hpbGROYW1lfSFcblxuQmVzdCByZWdhcmRzLFxuS2lkIFBhcnR5IFJTVlAgVGVhbWBcblxuICByZXR1cm4ge1xuICAgIHN1YmplY3QsXG4gICAgdGV4dFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVBhcnR5VXBkYXRlRW1haWwoXG4gIHBhcnR5RGF0YToge1xuICAgIGlkOiBzdHJpbmdcbiAgICBjaGlsZE5hbWU6IHN0cmluZ1xuICAgIGNoaWxkQWdlOiBudW1iZXJcbiAgICBldmVudERhdGV0aW1lOiBEYXRlXG4gICAgbG9jYXRpb246IHN0cmluZ1xuICAgIHRoZW1lPzogc3RyaW5nXG4gICAgbm90ZXM/OiBzdHJpbmdcbiAgICBwdWJsaWNSc3ZwVG9rZW46IHN0cmluZ1xuICB9LFxuICBndWVzdERhdGE6IHtcbiAgICBwYXJlbnROYW1lOiBzdHJpbmdcbiAgICBjaGlsZE5hbWU6IHN0cmluZ1xuICB9LFxuICBjaGFuZ2VzOiB7XG4gICAgZGF0ZT86IGJvb2xlYW5cbiAgICBsb2NhdGlvbj86IGJvb2xlYW5cbiAgICBjaGlsZE5hbWU/OiBib29sZWFuXG4gICAgY2hpbGRBZ2U/OiBib29sZWFuXG4gIH1cbikge1xuICBjb25zdCBmb3JtYXREYXRlID0gKGRhdGU6IERhdGUpID0+IHtcbiAgICByZXR1cm4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2VuLVVTJywge1xuICAgICAgd2Vla2RheTogJ2xvbmcnLFxuICAgICAgeWVhcjogJ251bWVyaWMnLFxuICAgICAgbW9udGg6ICdsb25nJyxcbiAgICAgIGRheTogJ251bWVyaWMnLFxuICAgICAgaG91cjogJ251bWVyaWMnLFxuICAgICAgbWludXRlOiAnMi1kaWdpdCcsXG4gICAgfSkuZm9ybWF0KGRhdGUpXG4gIH1cblxuICBjb25zdCBzdWJqZWN0ID0gYFBhcnR5IFVwZGF0ZTogJHtwYXJ0eURhdGEuY2hpbGROYW1lfSdzIEJpcnRoZGF5IFBhcnR5YFxuXG4gIGNvbnN0IGNoYW5nZXNMaXN0ID0gW11cbiAgaWYgKGNoYW5nZXMuZGF0ZSkgY2hhbmdlc0xpc3QucHVzaCgn8J+ThSBEYXRlIGFuZCB0aW1lJylcbiAgaWYgKGNoYW5nZXMubG9jYXRpb24pIGNoYW5nZXNMaXN0LnB1c2goJ/Cfk40gTG9jYXRpb24nKVxuICBpZiAoY2hhbmdlcy5jaGlsZE5hbWUpIGNoYW5nZXNMaXN0LnB1c2goJ/CfjoIgQ2hpbGRcXCdzIG5hbWUnKVxuICBpZiAoY2hhbmdlcy5jaGlsZEFnZSkgY2hhbmdlc0xpc3QucHVzaCgn8J+OiCBBZ2UnKVxuXG4gIGNvbnN0IHRleHQgPSBgSGkgJHtndWVzdERhdGEucGFyZW50TmFtZX0sXG5cbldlIGhhdmUgc29tZSBpbXBvcnRhbnQgdXBkYXRlcyBmb3IgJHtwYXJ0eURhdGEuY2hpbGROYW1lfSdzICR7cGFydHlEYXRhLmNoaWxkQWdlfXRoIGJpcnRoZGF5IHBhcnR5IVxuXG5XaGF0J3MgQ2hhbmdlZDpcbiR7Y2hhbmdlc0xpc3QubWFwKGNoYW5nZSA9PiBg4oCiICR7Y2hhbmdlfWApLmpvaW4oJ1xcbicpfVxuXG5VcGRhdGVkIFBhcnR5IERldGFpbHM6XG7wn46CICR7cGFydHlEYXRhLmNoaWxkTmFtZX0ncyAke3BhcnR5RGF0YS5jaGlsZEFnZX10aCBCaXJ0aGRheSR7cGFydHlEYXRhLnRoZW1lID8gYCAoJHtwYXJ0eURhdGEudGhlbWV9IHRoZW1lKWAgOiAnJ31cbvCfk4UgJHtmb3JtYXREYXRlKHBhcnR5RGF0YS5ldmVudERhdGV0aW1lKX1cbvCfk40gJHtwYXJ0eURhdGEubG9jYXRpb259XG5cbiR7cGFydHlEYXRhLm5vdGVzID8gYFNwZWNpYWwgTm90ZXM6ICR7cGFydHlEYXRhLm5vdGVzfVxcblxcbmAgOiAnJ31QbGVhc2Ugbm90ZSB0aGVzZSBjaGFuZ2VzIGFuZCBsZXQgdXMga25vdyBpZiB0aGV5IGFmZmVjdCB5b3VyIGFiaWxpdHkgdG8gYXR0ZW5kLlxuWW91ciBjdXJyZW50IFJTVlAgaXMgc3RpbGwgdmFsaWQsIGJ1dCB5b3UgY2FuIHVwZGF0ZSBpdCBpZiBuZWVkZWQ6ICR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkFTRV9VUkx9L3JzdnAvJHtwYXJ0eURhdGEucHVibGljUnN2cFRva2VufVxuXG5XZSBhcG9sb2dpemUgZm9yIGFueSBpbmNvbnZlbmllbmNlIGFuZCBsb29rIGZvcndhcmQgdG8gY2VsZWJyYXRpbmcgd2l0aCAke2d1ZXN0RGF0YS5jaGlsZE5hbWV9IVxuXG5CZXN0IHJlZ2FyZHMsXG5LaWQgUGFydHkgUlNWUCBUZWFtYFxuXG4gIHJldHVybiB7XG4gICAgc3ViamVjdCxcbiAgICB0ZXh0XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRQYXJ0eVVwZGF0ZUVtYWlsKFxuICBlbWFpbDogc3RyaW5nLFxuICBwYXJlbnROYW1lOiBzdHJpbmcsXG4gIHBhcnR5RGF0YTogYW55LFxuICBjaGFuZ2VzOiBhbnlcbikge1xuICBjb25zdCBlbWFpbENvbnRlbnQgPSBnZW5lcmF0ZVBhcnR5VXBkYXRlRW1haWwoXG4gICAgcGFydHlEYXRhLFxuICAgIHsgcGFyZW50TmFtZSwgY2hpbGROYW1lOiAneW91ciBjaGlsZCcgfSxcbiAgICBjaGFuZ2VzXG4gIClcblxuICBhd2FpdCBzZW5kRW1haWwoe1xuICAgIHRvOiBlbWFpbCxcbiAgICBzdWJqZWN0OiBlbWFpbENvbnRlbnQuc3ViamVjdCxcbiAgICB0ZXh0OiBlbWFpbENvbnRlbnQudGV4dFxuICB9KVxufSJdLCJuYW1lcyI6WyJub2RlbWFpbGVyIiwiY3JlYXRlVHJhbnNwb3J0ZXIiLCJwcm9jZXNzIiwiZW52IiwiU01UUF9IT1NUIiwiU01UUF9VU0VSIiwiU01UUF9QQVNTIiwiaG9zdCIsInBvcnQiLCJzZWN1cmUiLCJhdXRoIiwidXNlciIsInBhc3MiLCJTTVRQX1BPUlQiLCJwYXJzZUludCIsInVuZGVmaW5lZCIsImlnbm9yZVRMUyIsInNlbmRFbWFpbCIsImVtYWlsRGF0YSIsInRyYW5zcG9ydGVyIiwiY29uc29sZSIsImxvZyIsInRvIiwic3ViamVjdCIsInRleHQiLCJQcm9taXNlIiwicmVzb2x2ZSIsIm1haWxPcHRpb25zIiwiZnJvbSIsIlNNVFBfRlJPTSIsImh0bWwiLCJyZXBsYWNlIiwicmVzdWx0Iiwic2VuZE1haWwiLCJtZXNzYWdlSWQiLCJlcnJvciIsImdlbmVyYXRlUlNWUENvbmZpcm1hdGlvbkVtYWlsIiwicGFydHlEYXRhIiwiZ3Vlc3REYXRhIiwiZm9ybWF0RGF0ZSIsImRhdGUiLCJJbnRsIiwiRGF0ZVRpbWVGb3JtYXQiLCJ3ZWVrZGF5IiwieWVhciIsIm1vbnRoIiwiZGF5IiwiaG91ciIsIm1pbnV0ZSIsImZvcm1hdCIsInN0YXR1c0Vtb2ppIiwic3RhdHVzVGV4dCIsImNoaWxkTmFtZSIsImd1ZXN0Q29uZmlybVRleHQiLCJzdGF0dXMiLCJudW1DaGlsZHJlbiIsInBhcmVudFN0YXlpbmciLCJwYXJlbnROYW1lIiwiY2hpbGRBZ2UiLCJ0aGVtZSIsImV2ZW50RGF0ZXRpbWUiLCJsb2NhdGlvbiIsIm5vdGVzIiwiYWxsZXJnaWVzIiwibWVzc2FnZSIsImdlbmVyYXRlSG9zdFJTVlBOb3RpZmljYXRpb25FbWFpbCIsImdlbmVyYXRlUmVtaW5kZXJFbWFpbCIsInJlbWluZGVyVHlwZSIsInRpbWVNYXAiLCJTRVZFTl9EQVlTIiwiVFdPX0RBWVMiLCJTQU1FX0RBWSIsInJzdnBVcmwiLCJnZW5lcmF0ZVBhcnR5VXBkYXRlRW1haWwiLCJjaGFuZ2VzIiwiY2hhbmdlc0xpc3QiLCJwdXNoIiwibWFwIiwiY2hhbmdlIiwiam9pbiIsIk5FWFRfUFVCTElDX0JBU0VfVVJMIiwicHVibGljUnN2cFRva2VuIiwic2VuZFBhcnR5VXBkYXRlRW1haWwiLCJlbWFpbCIsImVtYWlsQ29udGVudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/email.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkM7QUFFN0MsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRTtBQUVsRSxJQUFJSSxJQUFxQyxFQUFFSCxnQkFBZ0JFLE1BQU0sR0FBR0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zaGlxaS9Eb2N1bWVudHMvc2hpcWkva2lkcGFydHkvc3JjL2xpYi9wcmlzbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XG4gIHByaXNtYTogUHJpc21hQ2xpZW50IHwgdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoKVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYSJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwicHJvY2VzcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/security.ts":
/*!*****************************!*\
  !*** ./src/lib/security.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getClientIP: () => (/* binding */ getClientIP),\n/* harmony export */   isValidEmail: () => (/* binding */ isValidEmail),\n/* harmony export */   isValidUUID: () => (/* binding */ isValidUUID),\n/* harmony export */   rateLimit: () => (/* binding */ rateLimit),\n/* harmony export */   sanitizeInput: () => (/* binding */ sanitizeInput)\n/* harmony export */ });\n// Rate limiting store (in production, use Redis or similar)\nconst rateLimitStore = new Map();\nfunction rateLimit(identifier, maxRequests = 10, windowMs = 60000 // 1 minute\n) {\n    const now = Date.now();\n    const record = rateLimitStore.get(identifier);\n    if (!record || now > record.resetTime) {\n        rateLimitStore.set(identifier, {\n            count: 1,\n            resetTime: now + windowMs\n        });\n        return true;\n    }\n    if (record.count >= maxRequests) {\n        return false;\n    }\n    record.count++;\n    return true;\n}\nfunction getClientIP(request) {\n    const forwarded = request.headers.get('x-forwarded-for');\n    const realIP = request.headers.get('x-real-ip');\n    if (forwarded) {\n        return forwarded.split(',')[0].trim();\n    }\n    if (realIP) {\n        return realIP;\n    }\n    return 'unknown';\n}\nfunction sanitizeInput(input) {\n    return input.trim().replace(/<[^>]*>/g, '') // Remove HTML tags\n    .replace(/javascript:/gi, '') // Remove javascript: URLs\n    .substring(0, 1000) // Limit length\n    ;\n}\nfunction isValidEmail(email) {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email) && email.length <= 254;\n}\nfunction isValidUUID(uuid) {\n    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n    return uuidRegex.test(uuid);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3NlY3VyaXR5LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBRUEsNERBQTREO0FBQzVELE1BQU1BLGlCQUFpQixJQUFJQztBQUVwQixTQUFTQyxVQUNkQyxVQUFrQixFQUNsQkMsY0FBc0IsRUFBRSxFQUN4QkMsV0FBbUIsTUFBTSxXQUFXO0FBQVo7SUFFeEIsTUFBTUMsTUFBTUMsS0FBS0QsR0FBRztJQUNwQixNQUFNRSxTQUFTUixlQUFlUyxHQUFHLENBQUNOO0lBRWxDLElBQUksQ0FBQ0ssVUFBVUYsTUFBTUUsT0FBT0UsU0FBUyxFQUFFO1FBQ3JDVixlQUFlVyxHQUFHLENBQUNSLFlBQVk7WUFDN0JTLE9BQU87WUFDUEYsV0FBV0osTUFBTUQ7UUFDbkI7UUFDQSxPQUFPO0lBQ1Q7SUFFQSxJQUFJRyxPQUFPSSxLQUFLLElBQUlSLGFBQWE7UUFDL0IsT0FBTztJQUNUO0lBRUFJLE9BQU9JLEtBQUs7SUFDWixPQUFPO0FBQ1Q7QUFFTyxTQUFTQyxZQUFZQyxPQUFvQjtJQUM5QyxNQUFNQyxZQUFZRCxRQUFRRSxPQUFPLENBQUNQLEdBQUcsQ0FBQztJQUN0QyxNQUFNUSxTQUFTSCxRQUFRRSxPQUFPLENBQUNQLEdBQUcsQ0FBQztJQUVuQyxJQUFJTSxXQUFXO1FBQ2IsT0FBT0EsVUFBVUcsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUNDLElBQUk7SUFDckM7SUFFQSxJQUFJRixRQUFRO1FBQ1YsT0FBT0E7SUFDVDtJQUVBLE9BQU87QUFDVDtBQUVPLFNBQVNHLGNBQWNDLEtBQWE7SUFDekMsT0FBT0EsTUFDSkYsSUFBSSxHQUNKRyxPQUFPLENBQUMsWUFBWSxJQUFJLG1CQUFtQjtLQUMzQ0EsT0FBTyxDQUFDLGlCQUFpQixJQUFJLDBCQUEwQjtLQUN2REMsU0FBUyxDQUFDLEdBQUcsTUFBTSxlQUFlOztBQUN2QztBQUVPLFNBQVNDLGFBQWFDLEtBQWE7SUFDeEMsTUFBTUMsYUFBYTtJQUNuQixPQUFPQSxXQUFXQyxJQUFJLENBQUNGLFVBQVVBLE1BQU1HLE1BQU0sSUFBSTtBQUNuRDtBQUVPLFNBQVNDLFlBQVlDLElBQVk7SUFDdEMsTUFBTUMsWUFBWTtJQUNsQixPQUFPQSxVQUFVSixJQUFJLENBQUNHO0FBQ3hCIiwic291cmNlcyI6WyIvVXNlcnMvc2hpcWkvRG9jdW1lbnRzL3NoaXFpL2tpZHBhcnR5L3NyYy9saWIvc2VjdXJpdHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcidcblxuLy8gUmF0ZSBsaW1pdGluZyBzdG9yZSAoaW4gcHJvZHVjdGlvbiwgdXNlIFJlZGlzIG9yIHNpbWlsYXIpXG5jb25zdCByYXRlTGltaXRTdG9yZSA9IG5ldyBNYXA8c3RyaW5nLCB7IGNvdW50OiBudW1iZXI7IHJlc2V0VGltZTogbnVtYmVyIH0+KClcblxuZXhwb3J0IGZ1bmN0aW9uIHJhdGVMaW1pdChcbiAgaWRlbnRpZmllcjogc3RyaW5nLFxuICBtYXhSZXF1ZXN0czogbnVtYmVyID0gMTAsXG4gIHdpbmRvd01zOiBudW1iZXIgPSA2MDAwMCAvLyAxIG1pbnV0ZVxuKTogYm9vbGVhbiB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgY29uc3QgcmVjb3JkID0gcmF0ZUxpbWl0U3RvcmUuZ2V0KGlkZW50aWZpZXIpXG5cbiAgaWYgKCFyZWNvcmQgfHwgbm93ID4gcmVjb3JkLnJlc2V0VGltZSkge1xuICAgIHJhdGVMaW1pdFN0b3JlLnNldChpZGVudGlmaWVyLCB7XG4gICAgICBjb3VudDogMSxcbiAgICAgIHJlc2V0VGltZTogbm93ICsgd2luZG93TXNcbiAgICB9KVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBpZiAocmVjb3JkLmNvdW50ID49IG1heFJlcXVlc3RzKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICByZWNvcmQuY291bnQrK1xuICByZXR1cm4gdHJ1ZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2xpZW50SVAocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBzdHJpbmcge1xuICBjb25zdCBmb3J3YXJkZWQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKVxuICBjb25zdCByZWFsSVAgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXJlYWwtaXAnKVxuICBcbiAgaWYgKGZvcndhcmRlZCkge1xuICAgIHJldHVybiBmb3J3YXJkZWQuc3BsaXQoJywnKVswXS50cmltKClcbiAgfVxuICBcbiAgaWYgKHJlYWxJUCkge1xuICAgIHJldHVybiByZWFsSVBcbiAgfVxuICBcbiAgcmV0dXJuICd1bmtub3duJ1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVJbnB1dChpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGlucHV0XG4gICAgLnRyaW0oKVxuICAgIC5yZXBsYWNlKC88W14+XSo+L2csICcnKSAvLyBSZW1vdmUgSFRNTCB0YWdzXG4gICAgLnJlcGxhY2UoL2phdmFzY3JpcHQ6L2dpLCAnJykgLy8gUmVtb3ZlIGphdmFzY3JpcHQ6IFVSTHNcbiAgICAuc3Vic3RyaW5nKDAsIDEwMDApIC8vIExpbWl0IGxlbmd0aFxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZEVtYWlsKGVtYWlsOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvXG4gIHJldHVybiBlbWFpbFJlZ2V4LnRlc3QoZW1haWwpICYmIGVtYWlsLmxlbmd0aCA8PSAyNTRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRVVUlEKHV1aWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCB1dWlkUmVnZXggPSAvXlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLTVdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9JC9pXG4gIHJldHVybiB1dWlkUmVnZXgudGVzdCh1dWlkKVxufSJdLCJuYW1lcyI6WyJyYXRlTGltaXRTdG9yZSIsIk1hcCIsInJhdGVMaW1pdCIsImlkZW50aWZpZXIiLCJtYXhSZXF1ZXN0cyIsIndpbmRvd01zIiwibm93IiwiRGF0ZSIsInJlY29yZCIsImdldCIsInJlc2V0VGltZSIsInNldCIsImNvdW50IiwiZ2V0Q2xpZW50SVAiLCJyZXF1ZXN0IiwiZm9yd2FyZGVkIiwiaGVhZGVycyIsInJlYWxJUCIsInNwbGl0IiwidHJpbSIsInNhbml0aXplSW5wdXQiLCJpbnB1dCIsInJlcGxhY2UiLCJzdWJzdHJpbmciLCJpc1ZhbGlkRW1haWwiLCJlbWFpbCIsImVtYWlsUmVnZXgiLCJ0ZXN0IiwibGVuZ3RoIiwiaXNWYWxpZFVVSUQiLCJ1dWlkIiwidXVpZFJlZ2V4Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/security.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/openid-client","vendor-chunks/semver","vendor-chunks/bcryptjs","vendor-chunks/oauth","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/preact","vendor-chunks/yallist","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/oidc-token-hash","vendor-chunks/@panva","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/nodemailer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frsvp%2F%5Btoken%5D%2Froute&page=%2Fapi%2Frsvp%2F%5Btoken%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frsvp%2F%5Btoken%5D%2Froute.ts&appDir=%2FUsers%2Fshiqi%2FDocuments%2Fshiqi%2Fkidparty%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshiqi%2FDocuments%2Fshiqi%2Fkidparty&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();